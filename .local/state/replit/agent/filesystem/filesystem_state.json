{"file_contents":{"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { ProtectedRoute } from \"@/components/auth/protected-route\";\nimport { LoginPage } from \"@/components/auth/login-page\";\nimport MainLayout from \"@/components/layout/main-layout\";\nimport Dashboard from \"@/pages/dashboard\";\nimport Products from \"@/pages/products\";\nimport Parties from \"@/pages/parties\";\nimport Production from \"@/pages/production\";\nimport Sales from \"@/pages/sales\";\nimport Inventory from \"@/pages/inventory\";\nimport Planning from \"@/pages/planning\";\nimport Reports from \"@/pages/reports\";\nimport NotFound from \"@/pages/not-found\";\n\nfunction Router() {\n  return (\n    <ProtectedRoute fallback={<LoginPage />}>\n      <MainLayout>\n        <Switch>\n          <Route path=\"/\" component={Dashboard} />\n          <Route path=\"/dashboard\" component={Dashboard} />\n          <Route path=\"/products\" component={Products} />\n          <Route path=\"/parties\" component={Parties} />\n          <Route path=\"/production\" component={Production} />\n          <Route path=\"/sales\" component={Sales} />\n          <Route path=\"/inventory\" component={Inventory} />\n          <Route path=\"/planning\" component={Planning} />\n          <Route path=\"/reports\" component={Reports} />\n          <Route component={NotFound} />\n        </Switch>\n      </MainLayout>\n    </ProtectedRoute>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <Toaster />\n        <Router />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":1766},"client/src/pages/planning.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Plus, Trash2 } from \"lucide-react\";\nimport { api } from \"@/lib/api\";\n\ninterface PlanItem {\n  productId: number;\n  productName: string;\n  quantityPieces: number;\n  weightGrams: number;\n  rawMaterialType: string;\n  rawMaterialPricePerKg: number;\n}\n\nexport default function Planning() {\n  const [planItems, setPlanItems] = useState<PlanItem[]>([]);\n  const [selectedProductId, setSelectedProductId] = useState<string>(\"\");\n  const [quantity, setQuantity] = useState<string>(\"\");\n\n  const { data: products } = useQuery({\n    queryKey: [\"/api/products\"],\n    queryFn: api.getProducts,\n  });\n\n  const addToPlan = () => {\n    if (!selectedProductId || !quantity) return;\n\n    const product = products?.find((p: any) => p.id === parseInt(selectedProductId));\n    if (!product) return;\n\n    const newItem: PlanItem = {\n      productId: product.id,\n      productName: product.name,\n      quantityPieces: parseInt(quantity),\n      weightGrams: parseFloat(product.weightGrams),\n      rawMaterialType: product.rawMaterialType,\n      rawMaterialPricePerKg: parseFloat(product.rawMaterialPricePerKg),\n    };\n\n    setPlanItems([...planItems, newItem]);\n    setSelectedProductId(\"\");\n    setQuantity(\"\");\n  };\n\n  const removeFromPlan = (index: number) => {\n    setPlanItems(planItems.filter((_, i) => i !== index));\n  };\n\n  // Calculate material requirements\n  const materialRequirements = planItems.reduce((acc, item) => {\n    const totalWeightKg = (item.quantityPieces * item.weightGrams) / 1000;\n    const material = item.rawMaterialType;\n    \n    if (!acc[material]) {\n      acc[material] = {\n        totalKg: 0,\n        pricePerKg: item.rawMaterialPricePerKg,\n        totalCost: 0,\n      };\n    }\n    \n    acc[material].totalKg += totalWeightKg;\n    acc[material].totalCost = acc[material].totalKg * acc[material].pricePerKg;\n    \n    return acc;\n  }, {} as Record<string, { totalKg: number; pricePerKg: number; totalCost: number }>);\n\n  const totalCost = Object.values(materialRequirements).reduce((sum, mat) => sum + mat.totalCost, 0);\n\n  return (\n    <div className=\"space-y-6\" data-testid=\"planning-page\">\n      <Card>\n        <CardHeader>\n          <div className=\"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between\">\n            <div className=\"min-w-0\">\n              <CardTitle data-testid=\"planning-title\">Production Planning</CardTitle>\n              <p className=\"text-muted-foreground text-sm mt-1 hidden sm:block\" data-testid=\"planning-description\">\n                Plan production runs and calculate raw material requirements\n              </p>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent className=\"space-y-6\">\n          {/* Add Items to Plan */}\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 items-end\">\n            <div>\n              <Label htmlFor=\"product-select\">Product</Label>\n              <Select value={selectedProductId} onValueChange={setSelectedProductId}>\n                <SelectTrigger data-testid=\"select-product-planning\">\n                  <SelectValue placeholder=\"Select product\" />\n                </SelectTrigger>\n                <SelectContent>\n                  {products?.map((product: any) => (\n                    <SelectItem key={product.id} value={product.id.toString()}>\n                      {product.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n            <div>\n              <Label htmlFor=\"quantity-input\">Quantity (pieces)</Label>\n              <Input\n                id=\"quantity-input\"\n                type=\"number\"\n                placeholder=\"e.g., 500\"\n                value={quantity}\n                onChange={(e) => setQuantity(e.target.value)}\n                data-testid=\"input-quantity-planning\"\n              />\n            </div>\n            <Button\n              onClick={addToPlan}\n              disabled={!selectedProductId || !quantity}\n              data-testid=\"button-add-to-plan\"\n            >\n              <Plus className=\"w-4 h-4 mr-2\" />\n              Add to Plan\n            </Button>\n          </div>\n\n          {/* Plan Items */}\n          <div>\n            <h3 className=\"text-lg font-semibold mb-4\">Production Plan Items</h3>\n            {planItems.length === 0 ? (\n              <div className=\"text-center text-muted-foreground py-8\" data-testid=\"no-plan-items\">\n                No items in the production plan. Add products above to get started.\n              </div>\n            ) : (\n              <div className=\"space-y-2 max-h-96 overflow-y-auto\">\n                {planItems.map((item, index) => (\n                  <div\n                    key={index}\n                    className=\"flex items-center justify-between p-4 border border-border rounded-lg\"\n                    data-testid={`plan-item-${index}`}\n                  >\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center space-x-4\">\n                        <span className=\"font-medium\" data-testid={`plan-product-${index}`}>\n                          {item.productName}\n                        </span>\n                        <Badge variant=\"secondary\" data-testid={`plan-quantity-${index}`}>\n                          {item.quantityPieces} pieces\n                        </Badge>\n                        <span className=\"text-sm text-muted-foreground\" data-testid={`plan-weight-${index}`}>\n                          {((item.quantityPieces * item.weightGrams) / 1000).toFixed(2)} kg\n                        </span>\n                        <Badge variant=\"outline\" data-testid={`plan-material-${index}`}>\n                          {item.rawMaterialType}\n                        </Badge>\n                      </div>\n                    </div>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => removeFromPlan(index)}\n                      data-testid={`button-remove-plan-${index}`}\n                    >\n                      <Trash2 className=\"w-4 h-4\" />\n                    </Button>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n\n          {/* Material Requirements */}\n          {Object.keys(materialRequirements).length > 0 && (\n            <div>\n              <h3 className=\"text-lg font-semibold mb-4\">Material Requirements</h3>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {Object.entries(materialRequirements).map(([material, data]) => (\n                  <Card key={material} data-testid={`material-requirement-${material}`}>\n                    <CardContent className=\"p-4\">\n                      <h4 className=\"font-medium mb-2\" data-testid={`material-name-${material}`}>\n                        {material}\n                      </h4>\n                      <div className=\"space-y-1 text-sm\">\n                        <div className=\"flex justify-between\">\n                          <span>Required:</span>\n                          <span className=\"font-medium\" data-testid={`material-quantity-${material}`}>\n                            {data.totalKg.toFixed(2)} kg\n                          </span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Price/kg:</span>\n                          <span data-testid={`material-price-${material}`}>\n                            ₹{data.pricePerKg}\n                          </span>\n                        </div>\n                        <div className=\"flex justify-between border-t pt-1\">\n                          <span>Total Cost:</span>\n                          <span className=\"font-bold\" data-testid={`material-cost-${material}`}>\n                            ₹{data.totalCost.toFixed(2)}\n                          </span>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n              \n              <div className=\"mt-6 p-4 bg-muted rounded-lg\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-lg font-semibold\">Total Material Cost:</span>\n                  <span className=\"text-xl font-bold text-primary\" data-testid=\"total-material-cost\">\n                    ₹{totalCost.toFixed(2)}\n                  </span>\n                </div>\n              </div>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":9070},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/layout/app-sidebar.tsx":{"content":"import { Link, useLocation } from \"wouter\";\nimport { cn } from \"@/lib/utils\";\nimport { Factory, LayoutDashboard, Package, Users, Hammer, ShoppingCart, Warehouse, Calendar, BarChart3, X } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\n\nconst navigationItems = [\n  { name: \"Dashboard\", href: \"/dashboard\", icon: LayoutDashboard },\n  { name: \"Products\", href: \"/products\", icon: Package },\n  { name: \"Parties\", href: \"/parties\", icon: Users },\n  { name: \"Production\", href: \"/production\", icon: Hammer },\n  { name: \"Sales Orders\", href: \"/sales\", icon: ShoppingCart },\n  { name: \"Inventory\", href: \"/inventory\", icon: Warehouse },\n  { name: \"Planning\", href: \"/planning\", icon: Calendar },\n  { name: \"Reports\", href: \"/reports\", icon: BarChart3 },\n];\n\ninterface AppSidebarProps {\n  isOpen?: boolean;\n  onClose?: () => void;\n}\n\nexport default function AppSidebar({ isOpen = true, onClose }: AppSidebarProps) {\n  const [location] = useLocation();\n\n  return (\n    <>\n      {/* Mobile Overlay */}\n      {isOpen && (\n        <div \n          className=\"fixed inset-0 bg-black/50 z-40 lg:hidden\"\n          onClick={onClose}\n        />\n      )}\n      \n      {/* Sidebar */}\n      <aside className={cn(\n        \"fixed lg:static inset-y-0 left-0 z-50 w-64 bg-card border-r border-border sidebar-transition\",\n        \"lg:translate-x-0\",\n        isOpen ? \"translate-x-0\" : \"-translate-x-full lg:translate-x-0\"\n      )}>\n        <div className=\"flex items-center justify-between p-6\">\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-8 h-8 bg-primary rounded-lg flex items-center justify-center\">\n              <Factory className=\"w-4 h-4 text-primary-foreground\" />\n            </div>\n            <h1 className=\"text-xl font-bold\">Fitwell ERP</h1>\n          </div>\n          \n          {/* Mobile Close Button */}\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={onClose}\n            className=\"lg:hidden\"\n            data-testid=\"button-close-sidebar\"\n          >\n            <X className=\"w-5 h-5\" />\n          </Button>\n        </div>\n        \n        <nav className=\"px-4 space-y-1\" data-testid=\"sidebar-navigation\">\n          {navigationItems.map((item) => {\n            const Icon = item.icon;\n            const isActive = location === item.href || (item.href === \"/dashboard\" && location === \"/\");\n            \n            return (\n              <Link\n                key={item.href}\n                href={item.href}\n                onClick={onClose} // Close mobile menu when navigating\n                className={cn(\n                  \"flex items-center space-x-3 px-3 py-2 rounded-md transition-colors\",\n                  isActive\n                    ? \"bg-accent text-accent-foreground\"\n                    : \"text-muted-foreground hover:bg-accent hover:text-accent-foreground\"\n                )}\n                data-testid={`nav-link-${item.name.toLowerCase().replace(' ', '-')}`}\n              >\n                <Icon className=\"w-4 h-4\" />\n                <span>{item.name}</span>\n              </Link>\n            );\n          })}\n        </nav>\n      </aside>\n    </>\n  );\n}\n","size_bytes":3179},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/components/tables/products-table.tsx":{"content":"import { Badge } from \"@/components/ui/badge\";\nimport { Trash2, Edit } from \"lucide-react\";\nimport ResponsiveDataTable from \"@/components/ui/responsive-data-table\";\nimport type { Product } from \"@shared/schema\";\n\ninterface ProductsTableProps {\n  products: Product[];\n  onDelete: (id: number) => void;\n  isDeleting: boolean;\n}\n\nexport default function ProductsTable({ products, onDelete, isDeleting }: ProductsTableProps) {\n  const columns = [\n    {\n      key: 'name' as keyof Product,\n      label: 'Product Name',\n      className: 'font-medium',\n    },\n    {\n      key: 'weightGrams' as keyof Product,\n      label: 'Weight (g)',\n      render: (value: string) => `${value}g`,\n    },\n    {\n      key: 'rawMaterialType' as keyof Product,\n      label: 'Raw Material',\n      render: (value: string) => <Badge variant=\"outline\">{value}</Badge>,\n    },\n    {\n      key: 'rawMaterialPricePerKg' as keyof Product,\n      label: 'Price per KG',\n      render: (value: string) => `₹${parseFloat(value).toFixed(2)}`,\n    },\n  ];\n\n  const actions = [\n    {\n      label: 'Edit',\n      icon: <Edit className=\"w-4 h-4\" />,\n      onClick: (product: Product) => {\n        // TODO: Implement edit functionality\n        console.log('Edit product:', product.id);\n      },\n      variant: 'ghost' as const,\n      testId: (product: Product) => `button-edit-product-${product.id}`,\n    },\n    {\n      label: 'Delete',\n      icon: <Trash2 className=\"w-4 h-4\" />,\n      onClick: (product: Product) => onDelete(product.id),\n      disabled: isDeleting,\n      variant: 'ghost' as const,\n      testId: (product: Product) => `button-delete-product-${product.id}`,\n    },\n  ];\n\n  return (\n    <ResponsiveDataTable\n      data={products}\n      columns={columns}\n      actions={actions}\n      emptyMessage=\"No products found. Add your first product to get started.\"\n      testId=\"products-table\"\n      getRowTestId={(product) => `product-row-${product.id}`}\n    />\n  );\n}\n","size_bytes":1936},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5742},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"server/storage.ts":{"content":"import { \n  products, parties, production, salesOrders, salesOrderItems, stockAdjustments, users,\n  type Product, type InsertProduct,\n  type Party, type InsertParty,\n  type Production, type InsertProduction, type ProductionWithProduct,\n  type SalesOrder, type InsertSalesOrder, type SalesOrderWithParty, type SalesOrderWithItems,\n  type SalesOrderItem, type InsertSalesOrderItem,\n  type StockAdjustment, type InsertStockAdjustment,\n  type InventoryItem,\n  type User, type UpsertUser\n} from \"@shared/schema\";\nimport { db } from \"./db\";\nimport { eq, desc, sql, and, like } from \"drizzle-orm\";\n\nexport interface IStorage {\n  // User operations - Required for Replit Auth integration\n  getUser(id: string): Promise<User | undefined>;\n  upsertUser(user: UpsertUser): Promise<User>;\n\n  // Products\n  getProducts(): Promise<Product[]>;\n  getProduct(id: number): Promise<Product | undefined>;\n  createProduct(product: InsertProduct): Promise<Product>;\n  updateProduct(id: number, product: Partial<InsertProduct>): Promise<Product>;\n  deleteProduct(id: number): Promise<void>;\n\n  // Parties\n  getParties(): Promise<Party[]>;\n  getParty(id: number): Promise<Party | undefined>;\n  createParty(party: InsertParty): Promise<Party>;\n  updateParty(id: number, party: Partial<InsertParty>): Promise<Party>;\n  deleteParty(id: number): Promise<void>;\n\n  // Production\n  getProduction(): Promise<ProductionWithProduct[]>;\n  getProductionRecord(id: number): Promise<ProductionWithProduct | undefined>;\n  createProductionRecord(production: InsertProduction): Promise<Production>;\n  updateProductionRecord(id: number, production: Partial<InsertProduction>): Promise<Production>;\n  deleteProductionRecord(id: number): Promise<void>;\n\n  // Sales Orders\n  getSalesOrders(): Promise<SalesOrderWithParty[]>;\n  getSalesOrder(id: number): Promise<SalesOrderWithItems | undefined>;\n  createSalesOrder(salesOrder: InsertSalesOrder, items: InsertSalesOrderItem[]): Promise<SalesOrder>;\n  updateSalesOrderStatus(id: number, status: string): Promise<SalesOrder>;\n  fulfillSalesOrderItems(orderId: number, fulfillments: { itemId: number; quantity: number }[]): Promise<void>;\n  deleteSalesOrder(id: number): Promise<void>;\n  cancelInvoice(id: number): Promise<SalesOrder>;\n\n  // Stock Adjustments\n  getStockAdjustments(): Promise<StockAdjustment[]>;\n  createStockAdjustment(adjustment: InsertStockAdjustment): Promise<StockAdjustment>;\n\n  // Inventory\n  getInventory(): Promise<InventoryItem[]>;\n\n  // Dashboard\n  getDashboardMetrics(): Promise<{\n    todayProduction: number;\n    yesterdayProduction: number;\n    pendingOrders: number;\n    urgentOrders: number;\n    lowStockItems: number;\n    monthlyExpense: number;\n  }>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  // User operations - Required for Replit Auth integration\n  async getUser(id: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.id, id));\n    return user || undefined;\n  }\n\n  async upsertUser(userData: UpsertUser): Promise<User> {\n    const [user] = await db\n      .insert(users)\n      .values(userData)\n      .onConflictDoUpdate({\n        target: users.id,\n        set: {\n          ...userData,\n          updatedAt: new Date(),\n        },\n      })\n      .returning();\n    return user;\n  }\n\n  async getProducts(): Promise<Product[]> {\n    return await db.select().from(products).orderBy(desc(products.createdAt));\n  }\n\n  async getProduct(id: number): Promise<Product | undefined> {\n    const [product] = await db.select().from(products).where(eq(products.id, id));\n    return product || undefined;\n  }\n\n  async createProduct(product: InsertProduct): Promise<Product> {\n    const [newProduct] = await db.insert(products).values(product).returning();\n    return newProduct;\n  }\n\n  async updateProduct(id: number, product: Partial<InsertProduct>): Promise<Product> {\n    const [updatedProduct] = await db\n      .update(products)\n      .set(product)\n      .where(eq(products.id, id))\n      .returning();\n    return updatedProduct;\n  }\n\n  async deleteProduct(id: number): Promise<void> {\n    // Check if product has related records\n    const [productionCount] = await db\n      .select({ count: sql<number>`COUNT(*)` })\n      .from(production)\n      .where(eq(production.productId, id));\n\n    const [salesCount] = await db\n      .select({ count: sql<number>`COUNT(*)` })\n      .from(salesOrderItems)\n      .where(eq(salesOrderItems.productId, id));\n\n    const [adjustmentCount] = await db\n      .select({ count: sql<number>`COUNT(*)` })\n      .from(stockAdjustments)\n      .where(eq(stockAdjustments.productId, id));\n\n    const totalRelated = Number(productionCount.count) + Number(salesCount.count) + Number(adjustmentCount.count);\n    \n    if (totalRelated > 0) {\n      throw new Error(`Cannot delete product. It has ${totalRelated} related records (production, sales, or stock adjustments). Please remove those records first.`);\n    }\n\n    await db.delete(products).where(eq(products.id, id));\n  }\n\n  async getParties(): Promise<Party[]> {\n    return await db.select().from(parties).orderBy(desc(parties.createdAt));\n  }\n\n  async getParty(id: number): Promise<Party | undefined> {\n    const [party] = await db.select().from(parties).where(eq(parties.id, id));\n    return party || undefined;\n  }\n\n  async createParty(party: InsertParty): Promise<Party> {\n    const [newParty] = await db.insert(parties).values(party).returning();\n    return newParty;\n  }\n\n  async updateParty(id: number, party: Partial<InsertParty>): Promise<Party> {\n    const [updatedParty] = await db\n      .update(parties)\n      .set(party)\n      .where(eq(parties.id, id))\n      .returning();\n    return updatedParty;\n  }\n\n  async deleteParty(id: number): Promise<void> {\n    // Check if party has related sales orders\n    const [salesOrderCount] = await db\n      .select({ count: sql<number>`COUNT(*)` })\n      .from(salesOrders)\n      .where(eq(salesOrders.partyId, id));\n\n    const totalRelated = Number(salesOrderCount.count);\n    \n    if (totalRelated > 0) {\n      throw new Error(`Cannot delete party. It has ${totalRelated} related sales orders. Please remove those orders first.`);\n    }\n\n    await db.delete(parties).where(eq(parties.id, id));\n  }\n\n  async getProduction(): Promise<ProductionWithProduct[]> {\n    return await db\n      .select()\n      .from(production)\n      .leftJoin(products, eq(production.productId, products.id))\n      .orderBy(desc(production.createdAt))\n      .then(rows => \n        rows.map(row => ({\n          ...row.production,\n          product: row.products!\n        }))\n      );\n  }\n\n  async getProductionRecord(id: number): Promise<ProductionWithProduct | undefined> {\n    const rows = await db\n      .select()\n      .from(production)\n      .leftJoin(products, eq(production.productId, products.id))\n      .where(eq(production.id, id));\n    \n    if (rows.length === 0) return undefined;\n    \n    const row = rows[0];\n    return {\n      ...row.production,\n      product: row.products!\n    };\n  }\n\n  async createProductionRecord(productionData: InsertProduction): Promise<Production> {\n    // Get product to calculate pieces\n    const [product] = await db.select().from(products).where(eq(products.id, productionData.productId));\n    if (!product) throw new Error(\"Product not found\");\n\n    const pieces = Math.floor((parseFloat(productionData.quantityKg) * 1000) / parseFloat(product.weightGrams));\n    \n    const [newProduction] = await db\n      .insert(production)\n      .values({\n        ...productionData,\n        pieces\n      })\n      .returning();\n    \n    return newProduction;\n  }\n\n  async updateProductionRecord(id: number, productionData: Partial<InsertProduction>): Promise<Production> {\n    let updateData: Partial<InsertProduction> & { pieces?: number } = { ...productionData };\n\n    // Recalculate pieces if quantity or product changed\n    if (productionData.quantityKg || productionData.productId) {\n      const [existingRecord] = await db.select().from(production).where(eq(production.id, id));\n      const productId = productionData.productId || existingRecord.productId;\n      const quantityKg = productionData.quantityKg || existingRecord.quantityKg;\n\n      const [product] = await db.select().from(products).where(eq(products.id, productId));\n      if (product) {\n        const pieces = Math.floor((parseFloat(quantityKg) * 1000) / parseFloat(product.weightGrams));\n        updateData = { ...updateData, pieces };\n      }\n    }\n\n    const [updatedProduction] = await db\n      .update(production)\n      .set(updateData)\n      .where(eq(production.id, id))\n      .returning();\n    \n    return updatedProduction;\n  }\n\n  async deleteProductionRecord(id: number): Promise<void> {\n    await db.delete(production).where(eq(production.id, id));\n  }\n\n  async getSalesOrders(): Promise<SalesOrderWithParty[]> {\n    return await db\n      .select()\n      .from(salesOrders)\n      .leftJoin(parties, eq(salesOrders.partyId, parties.id))\n      .orderBy(desc(salesOrders.createdAt))\n      .then(rows =>\n        rows.map(row => ({\n          ...row.sales_orders,\n          party: row.parties!\n        }))\n      );\n  }\n\n  async getSalesOrder(id: number): Promise<SalesOrderWithItems | undefined> {\n    const orderRows = await db\n      .select()\n      .from(salesOrders)\n      .leftJoin(parties, eq(salesOrders.partyId, parties.id))\n      .where(eq(salesOrders.id, id));\n\n    if (orderRows.length === 0) return undefined;\n\n    const itemRows = await db\n      .select()\n      .from(salesOrderItems)\n      .leftJoin(products, eq(salesOrderItems.productId, products.id))\n      .where(eq(salesOrderItems.salesOrderId, id));\n\n    const orderRow = orderRows[0];\n    return {\n      ...orderRow.sales_orders,\n      party: orderRow.parties!,\n      items: itemRows.map(row => ({\n        ...row.sales_order_items,\n        product: row.products!\n      }))\n    };\n  }\n\n  async createSalesOrder(salesOrderData: InsertSalesOrder, items: InsertSalesOrderItem[]): Promise<SalesOrder> {\n    const [newOrder] = await db\n      .insert(salesOrders)\n      .values({\n        ...salesOrderData,\n        itemCount: items.length\n      })\n      .returning();\n\n    await db.insert(salesOrderItems).values(\n      items.map(item => ({\n        ...item,\n        salesOrderId: newOrder.id\n      }))\n    );\n\n    return newOrder;\n  }\n\n  async updateSalesOrderStatus(id: number, status: \"pending\" | \"partial_invoice\" | \"fully_invoiced\" | \"cancelled\"): Promise<SalesOrder> {\n    const [updatedOrder] = await db\n      .update(salesOrders)\n      .set({ status })\n      .where(eq(salesOrders.id, id))\n      .returning();\n    \n    return updatedOrder;\n  }\n\n  async fulfillSalesOrderItems(orderId: number, fulfillments: { itemId: number; quantity: number }[]): Promise<void> {\n    for (const fulfillment of fulfillments) {\n      // Get current order item details\n      const [orderItem] = await db\n        .select()\n        .from(salesOrderItems)\n        .where(eq(salesOrderItems.id, fulfillment.itemId));\n      \n      if (!orderItem) {\n        throw new Error(`Order item ${fulfillment.itemId} not found`);\n      }\n      \n      // Calculate remaining quantity that can be fulfilled\n      const remainingToFulfill = orderItem.quantity - orderItem.fulfilled;\n      if (fulfillment.quantity > remainingToFulfill) {\n        throw new Error(`Cannot fulfill ${fulfillment.quantity} pieces. Only ${remainingToFulfill} pieces remaining to fulfill.`);\n      }\n      \n      // Get current inventory for this product\n      const inventory = await this.getInventory();\n      const productInventory = inventory.find(item => item.id === orderItem.productId);\n      \n      if (!productInventory || productInventory.currentStock < fulfillment.quantity) {\n        const availableStock = productInventory?.currentStock || 0;\n        throw new Error(`Insufficient stock. Available: ${availableStock} pieces, requested: ${fulfillment.quantity} pieces.`);\n      }\n      \n      // Only fulfill if validation passes\n      await db\n        .update(salesOrderItems)\n        .set({ \n          fulfilled: sql`${salesOrderItems.fulfilled} + ${fulfillment.quantity}`\n        })\n        .where(eq(salesOrderItems.id, fulfillment.itemId));\n    }\n\n    // Update order status based on fulfillment\n    const items = await db\n      .select()\n      .from(salesOrderItems)\n      .where(eq(salesOrderItems.salesOrderId, orderId));\n\n    const allFulfilled = items.every(item => item.fulfilled >= item.quantity);\n    const anyFulfilled = items.some(item => item.fulfilled > 0);\n\n    let newStatus: \"pending\" | \"partial_invoice\" | \"fully_invoiced\" | \"cancelled\" = \"pending\";\n    if (allFulfilled) {\n      newStatus = \"fully_invoiced\";\n    } else if (anyFulfilled) {\n      newStatus = \"partial_invoice\";\n    }\n\n    await this.updateSalesOrderStatus(orderId, newStatus);\n  }\n\n  async deleteSalesOrder(id: number): Promise<void> {\n    // Note: This deletion does NOT add stock back to inventory as per requirements\n    // First delete related sales order items\n    await db.delete(salesOrderItems).where(eq(salesOrderItems.salesOrderId, id));\n    // Then delete the sales order\n    await db.delete(salesOrders).where(eq(salesOrders.id, id));\n  }\n\n  async cancelInvoice(id: number): Promise<SalesOrder> {\n    return await this.updateSalesOrderStatus(id, \"cancelled\");\n  }\n\n  async getStockAdjustments(): Promise<StockAdjustment[]> {\n    return await db.select().from(stockAdjustments).orderBy(desc(stockAdjustments.createdAt));\n  }\n\n  async createStockAdjustment(adjustment: InsertStockAdjustment): Promise<StockAdjustment> {\n    const [newAdjustment] = await db.insert(stockAdjustments).values(adjustment).returning();\n    return newAdjustment;\n  }\n\n  async getInventory(): Promise<InventoryItem[]> {\n    const productsData = await db.select().from(products);\n    \n    const inventory: InventoryItem[] = [];\n\n    for (const product of productsData) {\n      // Get total production\n      const productionResult = await db\n        .select({ total: sql<number>`COALESCE(SUM(${production.pieces}), 0)` })\n        .from(production)\n        .where(eq(production.productId, product.id));\n      \n      const totalProduced = Number(productionResult[0]?.total || 0);\n\n      // Get total sold (fulfilled)\n      const salesResult = await db\n        .select({ total: sql<number>`COALESCE(SUM(${salesOrderItems.fulfilled}), 0)` })\n        .from(salesOrderItems)\n        .where(eq(salesOrderItems.productId, product.id));\n      \n      const totalSold = Number(salesResult[0]?.total || 0);\n\n      // Get stock adjustments\n      const adjustmentsResult = await db\n        .select({ total: sql<number>`COALESCE(SUM(${stockAdjustments.quantity}), 0)` })\n        .from(stockAdjustments)\n        .where(eq(stockAdjustments.productId, product.id));\n      \n      const adjustments = Number(adjustmentsResult[0]?.total || 0);\n\n      const currentStock = totalProduced - totalSold + adjustments;\n\n      inventory.push({\n        ...product,\n        currentStock,\n        totalProduced,\n        totalSold,\n        adjustments\n      });\n    }\n\n    return inventory;\n  }\n\n  async getDashboardMetrics(): Promise<{\n    todayProduction: number;\n    yesterdayProduction: number;\n    pendingOrders: number;\n    urgentOrders: number;\n    lowStockItems: number;\n    monthlyExpense: number;\n  }> {\n    const today = new Date().toISOString().split('T')[0];\n    const yesterday = new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString().split('T')[0];\n    const thisMonth = new Date().toISOString().slice(0, 7);\n\n    // Today's production\n    const todayProductionResult = await db\n      .select({ total: sql<number>`COALESCE(SUM(${production.pieces}), 0)` })\n      .from(production)\n      .where(eq(production.date, today));\n    \n    const todayProduction = Number(todayProductionResult[0]?.total || 0);\n\n    // Yesterday's production\n    const yesterdayProductionResult = await db\n      .select({ total: sql<number>`COALESCE(SUM(${production.pieces}), 0)` })\n      .from(production)\n      .where(eq(production.date, yesterday));\n    \n    const yesterdayProduction = Number(yesterdayProductionResult[0]?.total || 0);\n\n    // Pending orders\n    const pendingOrdersResult = await db\n      .select({ count: sql<number>`COUNT(*)` })\n      .from(salesOrders)\n      .where(eq(salesOrders.status, \"pending\"));\n    \n    const pendingOrders = Number(pendingOrdersResult[0]?.count || 0);\n\n    // Urgent orders (pending orders from more than 7 days ago)\n    const sevenDaysAgo = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0];\n    const urgentOrdersResult = await db\n      .select({ count: sql<number>`COUNT(*)` })\n      .from(salesOrders)\n      .where(\n        and(\n          eq(salesOrders.status, \"pending\"),\n          sql`${salesOrders.date} <= ${sevenDaysAgo}`\n        )\n      );\n    \n    const urgentOrders = Number(urgentOrdersResult[0]?.count || 0);\n\n    // Low stock items (less than 50 pieces)\n    const inventory = await this.getInventory();\n    const lowStockItems = inventory.filter(item => item.currentStock < 50).length;\n\n    // Monthly expenses (material costs from production)\n    const monthlyProductionResult = await db\n      .select({\n        quantityKg: production.quantityKg,\n        rawMaterialPricePerKg: products.rawMaterialPricePerKg\n      })\n      .from(production)\n      .innerJoin(products, eq(production.productId, products.id))\n      .where(like(production.date, `${thisMonth}%`));\n    \n    const monthlyExpense = monthlyProductionResult.reduce((total, record) => {\n      const cost = parseFloat(record.quantityKg) * parseFloat(record.rawMaterialPricePerKg);\n      return total + cost;\n    }, 0);\n\n    return {\n      todayProduction,\n      yesterdayProduction,\n      pendingOrders,\n      urgentOrders,\n      lowStockItems,\n      monthlyExpense\n    };\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","size_bytes":17832},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/tables/sales-table.tsx":{"content":"import { useState } from \"react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Eye, Package, Trash2, XCircle } from \"lucide-react\";\nimport { format } from \"date-fns\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { api } from \"@/lib/api\";\nimport ResponsiveDataTable from \"@/components/ui/responsive-data-table\";\nimport type { SalesOrderWithParty } from \"@shared/schema\";\n\ninterface SalesTableProps {\n  salesOrders: SalesOrderWithParty[];\n  onFulfill: (orderId: number, fulfillments: any) => void;\n  isFulfilling: boolean;\n  onDelete: (orderId: number) => void;\n  onCancel: (orderId: number) => void;\n  isDeleting?: boolean;\n  isCancelling?: boolean;\n}\n\nexport default function SalesTable({ salesOrders, onFulfill, isFulfilling, onDelete, onCancel, isDeleting, isCancelling }: SalesTableProps) {\n  const [selectedOrderId, setSelectedOrderId] = useState<number | null>(null);\n  const [isDetailModalOpen, setIsDetailModalOpen] = useState(false);\n  const [isFulfillModalOpen, setIsFulfillModalOpen] = useState(false);\n  const [fulfillmentData, setFulfillmentData] = useState<Record<number, number>>({});\n\n  const { data: orderDetails } = useQuery({\n    queryKey: [\"/api/sales\", selectedOrderId],\n    queryFn: () => selectedOrderId ? api.getSalesOrder(selectedOrderId) : null,\n    enabled: !!selectedOrderId,\n  });\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"pending\":\n        return \"bg-amber-100 text-amber-800\";\n      case \"partial_invoice\":\n        return \"bg-blue-100 text-blue-800\";\n      case \"fully_invoiced\":\n        return \"bg-green-100 text-green-800\";\n      case \"cancelled\":\n        return \"bg-red-100 text-red-800\";\n      default:\n        return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  const openDetailModal = (orderId: number) => {\n    setSelectedOrderId(orderId);\n    setIsDetailModalOpen(true);\n  };\n\n  const openFulfillModal = (orderId: number) => {\n    setSelectedOrderId(orderId);\n    setIsFulfillModalOpen(true);\n    // Initialize fulfillment data\n    if (orderDetails?.items) {\n      const initialData: Record<number, number> = {};\n      orderDetails.items.forEach((item: any) => {\n        initialData[item.id] = Math.max(0, item.quantity - item.fulfilled);\n      });\n      setFulfillmentData(initialData);\n    }\n  };\n\n  const handleFulfill = () => {\n    if (!selectedOrderId || !orderDetails) return;\n    \n    const fulfillments = Object.entries(fulfillmentData)\n      .filter(([_, quantity]) => quantity > 0)\n      .map(([itemId, quantity]) => ({\n        itemId: parseInt(itemId),\n        quantity\n      }));\n\n    onFulfill(selectedOrderId, fulfillments);\n    setIsFulfillModalOpen(false);\n    setSelectedOrderId(null);\n  };\n\n  const columns = [\n    {\n      key: 'orderNumber' as keyof SalesOrderWithParty,\n      label: 'Order Number',\n      className: 'font-medium',\n    },\n    {\n      key: 'party' as keyof SalesOrderWithParty,\n      label: 'Party',\n      render: (value: any) => value.name,\n    },\n    {\n      key: 'date' as keyof SalesOrderWithParty,\n      label: 'Date',\n      render: (value: string) => format(new Date(value), \"MMM dd, yyyy\"),\n    },\n    {\n      key: 'itemCount' as keyof SalesOrderWithParty,\n      label: 'Items',\n      render: (value: number) => `${value} items`,\n    },\n    {\n      key: 'status' as keyof SalesOrderWithParty,\n      label: 'Status',\n      render: (value: string) => (\n        <Badge className={getStatusColor(value)}>\n          {value.replace('_', ' ')}\n        </Badge>\n      ),\n    },\n  ];\n\n  const getActions = (order: SalesOrderWithParty) => {\n    const actions = [\n      {\n        label: 'View',\n        icon: <Eye className=\"w-4 h-4\" />,\n        onClick: () => openDetailModal(order.id),\n        variant: 'ghost' as const,\n        disabled: false,\n        testId: () => `button-view-order-${order.id}`,\n      },\n    ];\n\n    // Add fulfill button for pending and partial orders\n    if (order.status === \"pending\" || order.status === \"partial_invoice\") {\n      actions.push({\n        label: 'Fulfill',\n        icon: <Package className=\"w-4 h-4\" />,\n        onClick: () => openFulfillModal(order.id),\n        variant: 'ghost' as const,\n        disabled: isFulfilling,\n        testId: () => `button-fulfill-order-${order.id}`,\n      });\n    }\n\n    // Add cancel button for non-cancelled orders\n    if (order.status !== \"cancelled\") {\n      actions.push({\n        label: 'Cancel',\n        icon: <XCircle className=\"w-4 h-4\" />,\n        onClick: () => onCancel(order.id),\n        variant: 'ghost' as const,\n        disabled: isCancelling || false,\n        testId: () => `button-cancel-order-${order.id}`,\n      });\n    }\n\n    // Add delete button\n    actions.push({\n      label: 'Delete',\n      icon: <Trash2 className=\"w-4 h-4\" />,\n      onClick: () => onDelete(order.id),\n      variant: 'ghost' as const,\n      disabled: isDeleting || false,\n      testId: () => `button-delete-order-${order.id}`,\n    });\n\n    return actions;\n  };\n\n  return (\n    <>\n      <ResponsiveDataTable\n        data={salesOrders}\n        columns={columns}\n        actions={getActions}\n        emptyMessage=\"No sales orders found. Create your first sales order to start tracking orders.\"\n        testId=\"sales-table\"\n        getRowTestId={(order) => `sales-order-row-${order.id}`}\n        getCardTestId={(order) => `sales-order-card-${order.id}`}\n      />\n\n      {/* Order Details Modal */}\n      <Dialog open={isDetailModalOpen} onOpenChange={setIsDetailModalOpen}>\n        <DialogContent className=\"max-w-2xl\" data-testid=\"order-details-modal\">\n          <DialogHeader>\n            <DialogTitle>Order Details - {orderDetails?.orderNumber}</DialogTitle>\n          </DialogHeader>\n          {orderDetails && (\n            <div className=\"space-y-4\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <Label>Party</Label>\n                  <p className=\"font-medium\" data-testid=\"modal-party-name\">{orderDetails.party.name}</p>\n                </div>\n                <div>\n                  <Label>Date</Label>\n                  <p data-testid=\"modal-order-date\">{format(new Date(orderDetails.date), \"PPP\")}</p>\n                </div>\n              </div>\n              <div>\n                <Label>Items</Label>\n                <div className=\"mt-2 space-y-2\">\n                  {orderDetails.items.map((item: any, index: any) => (\n                    <div key={item.id} className=\"flex justify-between items-center p-2 border rounded\" data-testid={`modal-item-${index}`}>\n                      <span data-testid={`modal-item-product-${index}`}>{item.product.name}</span>\n                      <span data-testid={`modal-item-quantity-${index}`}>\n                        {item.fulfilled}/{item.quantity} pieces\n                      </span>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n\n      {/* Fulfill Order Modal */}\n      <Dialog open={isFulfillModalOpen} onOpenChange={setIsFulfillModalOpen}>\n        <DialogContent className=\"max-w-xl\" data-testid=\"fulfill-order-modal\">\n          <DialogHeader>\n            <DialogTitle>Fulfill Order - {orderDetails?.orderNumber}</DialogTitle>\n          </DialogHeader>\n          {orderDetails && (\n            <div className=\"space-y-4\">\n              <div className=\"space-y-3\">\n                {orderDetails.items.map((item: any, index: any) => {\n                  const remaining = item.quantity - item.fulfilled;\n                  return (\n                    <div key={item.id} className=\"space-y-2\" data-testid={`fulfill-item-${index}`}>\n                      <Label data-testid={`fulfill-item-label-${index}`}>\n                        {item.product.name} (Remaining: {remaining} pieces)\n                      </Label>\n                      <Input\n                        type=\"number\"\n                        min=\"0\"\n                        max={remaining}\n                        value={fulfillmentData[item.id] || 0}\n                        onChange={(e) => setFulfillmentData(prev => ({\n                          ...prev,\n                          [item.id]: parseInt(e.target.value) || 0\n                        }))}\n                        data-testid={`input-fulfill-quantity-${index}`}\n                      />\n                    </div>\n                  );\n                })}\n              </div>\n              <div className=\"flex space-x-3\">\n                <Button\n                  variant=\"outline\"\n                  className=\"flex-1\"\n                  onClick={() => setIsFulfillModalOpen(false)}\n                  data-testid=\"button-cancel-fulfill\"\n                >\n                  Cancel\n                </Button>\n                <Button\n                  className=\"flex-1\"\n                  onClick={handleFulfill}\n                  disabled={isFulfilling}\n                  data-testid=\"button-confirm-fulfill\"\n                >\n                  {isFulfilling ? \"Fulfilling...\" : \"Fulfill Order\"}\n                </Button>\n              </div>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}","size_bytes":9406},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar, decimal, integer, timestamp, serial, index, jsonb } from \"drizzle-orm/pg-core\";\nimport { relations } from \"drizzle-orm\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\nexport const products = pgTable(\"products\", {\n  id: serial(\"id\").primaryKey(),\n  name: text(\"name\").notNull(),\n  weightGrams: decimal(\"weight_grams\", { precision: 10, scale: 2 }).notNull(),\n  rawMaterialType: text(\"raw_material_type\").notNull(),\n  rawMaterialPricePerKg: decimal(\"raw_material_price_per_kg\", { precision: 10, scale: 2 }).notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const parties = pgTable(\"parties\", {\n  id: serial(\"id\").primaryKey(),\n  name: text(\"name\").notNull(),\n  address: text(\"address\").notNull(),\n  pinCode: text(\"pin_code\").notNull(),\n  phoneNumber: text(\"phone_number\").notNull(),\n  gstNumber: text(\"gst_number\"),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const production = pgTable(\"production\", {\n  id: serial(\"id\").primaryKey(),\n  date: text(\"date\").notNull(), // ISO format string\n  productId: integer(\"product_id\").notNull().references(() => products.id),\n  quantityKg: decimal(\"quantity_kg\", { precision: 10, scale: 3 }).notNull(),\n  pieces: integer(\"pieces\").notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const salesOrders = pgTable(\"sales_orders\", {\n  id: serial(\"id\").primaryKey(),\n  orderNumber: text(\"order_number\").notNull().unique(),\n  partyId: integer(\"party_id\").notNull().references(() => parties.id),\n  date: text(\"date\").notNull(), // ISO format string\n  status: text(\"status\", { enum: [\"pending\", \"partial_invoice\", \"fully_invoiced\", \"cancelled\"] }).notNull().default(\"pending\"),\n  itemCount: integer(\"item_count\").notNull().default(0),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const salesOrderItems = pgTable(\"sales_order_items\", {\n  id: serial(\"id\").primaryKey(),\n  salesOrderId: integer(\"sales_order_id\").notNull().references(() => salesOrders.id),\n  productId: integer(\"product_id\").notNull().references(() => products.id),\n  quantity: integer(\"quantity\").notNull(), // pieces ordered\n  fulfilled: integer(\"fulfilled\").notNull().default(0), // pieces shipped/invoiced\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const stockAdjustments = pgTable(\"stock_adjustments\", {\n  id: serial(\"id\").primaryKey(),\n  date: text(\"date\").notNull(), // ISO format string\n  productId: integer(\"product_id\").notNull().references(() => products.id),\n  quantity: integer(\"quantity\").notNull(), // can be positive or negative\n  reason: text(\"reason\").notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\n// Authentication tables - Required for Replit Auth integration\n// Session storage table.\n// (IMPORTANT) This table is mandatory for Replit Auth, don't drop it.\nexport const sessions = pgTable(\n  \"sessions\",\n  {\n    sid: varchar(\"sid\").primaryKey(),\n    sess: jsonb(\"sess\").notNull(),\n    expire: timestamp(\"expire\").notNull(),\n  },\n  (table) => [index(\"IDX_session_expire\").on(table.expire)],\n);\n\n// User storage table.\n// (IMPORTANT) This table is mandatory for Replit Auth, don't drop it.\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  email: varchar(\"email\").unique(),\n  firstName: varchar(\"first_name\"),\n  lastName: varchar(\"last_name\"),\n  profileImageUrl: varchar(\"profile_image_url\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Relations\nexport const productsRelations = relations(products, ({ many }) => ({\n  production: many(production),\n  salesOrderItems: many(salesOrderItems),\n  stockAdjustments: many(stockAdjustments),\n}));\n\nexport const partiesRelations = relations(parties, ({ many }) => ({\n  salesOrders: many(salesOrders),\n}));\n\nexport const productionRelations = relations(production, ({ one }) => ({\n  product: one(products, {\n    fields: [production.productId],\n    references: [products.id],\n  }),\n}));\n\nexport const salesOrdersRelations = relations(salesOrders, ({ one, many }) => ({\n  party: one(parties, {\n    fields: [salesOrders.partyId],\n    references: [parties.id],\n  }),\n  items: many(salesOrderItems),\n}));\n\nexport const salesOrderItemsRelations = relations(salesOrderItems, ({ one }) => ({\n  salesOrder: one(salesOrders, {\n    fields: [salesOrderItems.salesOrderId],\n    references: [salesOrders.id],\n  }),\n  product: one(products, {\n    fields: [salesOrderItems.productId],\n    references: [products.id],\n  }),\n}));\n\nexport const stockAdjustmentsRelations = relations(stockAdjustments, ({ one }) => ({\n  product: one(products, {\n    fields: [stockAdjustments.productId],\n    references: [products.id],\n  }),\n}));\n\n// Insert schemas\nexport const insertProductSchema = createInsertSchema(products).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertPartySchema = createInsertSchema(parties).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertProductionSchema = createInsertSchema(production).omit({\n  id: true,\n  pieces: true,\n  createdAt: true,\n});\n\nexport const insertSalesOrderSchema = createInsertSchema(salesOrders).omit({\n  id: true,\n  itemCount: true,\n  createdAt: true,\n});\n\nexport const insertSalesOrderItemSchema = createInsertSchema(salesOrderItems).omit({\n  id: true,\n  salesOrderId: true,\n  fulfilled: true,\n  createdAt: true,\n});\n\nexport const insertStockAdjustmentSchema = createInsertSchema(stockAdjustments).omit({\n  id: true,\n  createdAt: true,\n});\n\n// Types\nexport type Product = typeof products.$inferSelect;\nexport type InsertProduct = z.infer<typeof insertProductSchema>;\n\nexport type Party = typeof parties.$inferSelect;\nexport type InsertParty = z.infer<typeof insertPartySchema>;\n\nexport type Production = typeof production.$inferSelect;\nexport type InsertProduction = z.infer<typeof insertProductionSchema>;\n\nexport type SalesOrder = typeof salesOrders.$inferSelect;\nexport type InsertSalesOrder = z.infer<typeof insertSalesOrderSchema>;\n\nexport type SalesOrderItem = typeof salesOrderItems.$inferSelect;\nexport type InsertSalesOrderItem = z.infer<typeof insertSalesOrderItemSchema>;\n\nexport type StockAdjustment = typeof stockAdjustments.$inferSelect;\nexport type InsertStockAdjustment = z.infer<typeof insertStockAdjustmentSchema>;\n\n// Authentication types\nexport type User = typeof users.$inferSelect;\nexport type UpsertUser = typeof users.$inferInsert;\n\n// Extended types for API responses\nexport type ProductionWithProduct = Production & {\n  product: Product;\n};\n\nexport type SalesOrderWithParty = SalesOrder & {\n  party: Party;\n};\n\nexport type SalesOrderWithItems = SalesOrder & {\n  party: Party;\n  items: (SalesOrderItem & { product: Product })[];\n};\n\nexport type InventoryItem = Product & {\n  currentStock: number;\n  totalProduced: number;\n  totalSold: number;\n  adjustments: number;\n};\n","size_bytes":6993},"replit.md":{"content":"# Fitwell ERP\n\n## Overview\n\nFitwell ERP is a comprehensive web-based Enterprise Resource Planning application designed for small manufacturing businesses. The system provides centralized management of core manufacturing operations including product catalogs, customer/supplier relationships, production tracking, sales order management, inventory control, and reporting. Built with a modern full-stack architecture, it offers real-time visibility into manufacturing operations with features for production planning, stock management, and business analytics.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n- **Framework**: React with TypeScript for type safety and component-based architecture\n- **Build Tool**: Vite for fast development and optimized production builds\n- **UI Framework**: ShadCN UI components built on Radix UI primitives for accessible, customizable interfaces\n- **Styling**: Tailwind CSS with custom design tokens and dark mode support\n- **Routing**: Wouter for lightweight client-side routing\n- **State Management**: TanStack React Query for server state management and caching\n- **Forms**: React Hook Form with Zod validation for type-safe form handling\n\n### Backend Architecture\n- **Runtime**: Node.js with Express.js framework\n- **Language**: TypeScript with ES modules for modern JavaScript features\n- **API Design**: RESTful API with structured endpoints for each domain (products, parties, production, sales, inventory)\n- **Validation**: Zod schemas for runtime type validation and data transformation\n- **Database Layer**: Drizzle ORM for type-safe database operations and migrations\n\n### Data Storage\n- **Database**: PostgreSQL configured through Drizzle with support for Neon serverless PostgreSQL\n- **Schema Design**: Normalized relational schema with proper foreign key relationships\n- **Core Tables**: Products, parties (customers/suppliers), production records, sales orders, sales order items, and stock adjustments\n- **Data Types**: Decimal precision for weights and prices, proper indexing for performance\n\n### Authentication & Authorization\n- Session-based authentication infrastructure prepared (connect-pg-simple for session storage)\n- Middleware structure in place for request logging and error handling\n\n### Development & Build System\n- **Development**: Hot module replacement with Vite dev server\n- **Production Build**: Optimized bundling with esbuild for server-side code\n- **Type Checking**: Comprehensive TypeScript configuration with strict mode\n- **Code Quality**: Structured project layout with shared schema definitions\n\n## External Dependencies\n\n### Database Services\n- **Neon Database**: Serverless PostgreSQL hosting with connection pooling\n- **Drizzle Kit**: Database migrations and schema management\n\n### UI & Styling\n- **Radix UI**: Headless UI primitives for accessibility and customization\n- **Tailwind CSS**: Utility-first CSS framework with custom design system\n- **Lucide React**: Icon library for consistent iconography\n\n### Development Tools\n- **Replit Integration**: Custom plugins for development environment and debugging\n- **PostCSS**: CSS processing with Tailwind and Autoprefixer\n\n### Utility Libraries\n- **Date-fns**: Date manipulation and formatting\n- **Class Variance Authority**: Type-safe CSS class composition\n- **Nanoid**: Unique ID generation for entities\n\n### Data Management\n- **TanStack React Query**: Server state synchronization and caching\n- **React Hook Form**: Form state management with performance optimization\n- **Zod**: Runtime type validation and schema definition","size_bytes":3638},"server/db.ts":{"content":"import { Pool, neonConfig } from '@neondatabase/serverless';\nimport { drizzle } from 'drizzle-orm/neon-serverless';\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\nneonConfig.webSocketConstructor = ws;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle({ client: pool, schema });","size_bytes":482},"client/src/components/forms/bulk-upload.tsx":{"content":"import { useState, useRef } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Upload, File, AlertCircle, CheckCircle2, Download } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface BulkUploadProps {\n  endpoint: string;\n  title: string;\n  description: string;\n  templateHeaders: string[];\n  onSuccess?: () => void;\n}\n\ninterface UploadResult {\n  success: number;\n  failed: number;\n  errors: Array<{\n    row: number;\n    data: any;\n    error: any;\n  }>;\n}\n\nexport default function BulkUpload({ \n  endpoint, \n  title, \n  description, \n  templateHeaders,\n  onSuccess \n}: BulkUploadProps) {\n  const [file, setFile] = useState<File | null>(null);\n  const [uploading, setUploading] = useState(false);\n  const [result, setResult] = useState<UploadResult | null>(null);\n  const [dragActive, setDragActive] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const { toast } = useToast();\n\n  const downloadTemplate = () => {\n    // Create a simple CSV template\n    const csvContent = templateHeaders.join(',') + '\\n';\n    const blob = new Blob([csvContent], { type: 'text/csv' });\n    const url = window.URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `${title.toLowerCase().replace(' ', '_')}_template.csv`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    window.URL.revokeObjectURL(url);\n  };\n\n  const handleDrag = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === \"dragenter\" || e.type === \"dragover\") {\n      setDragActive(true);\n    } else if (e.type === \"dragleave\") {\n      setDragActive(false);\n    }\n  };\n\n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n    \n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\n      const droppedFile = e.dataTransfer.files[0];\n      if (isValidFileType(droppedFile)) {\n        setFile(droppedFile);\n        setResult(null);\n      } else {\n        toast({\n          title: \"Invalid file type\",\n          description: \"Please upload an Excel file (.xlsx or .xls)\",\n          variant: \"destructive\"\n        });\n      }\n    }\n  };\n\n  const isValidFileType = (file: File) => {\n    const validTypes = [\n      'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n      'application/vnd.ms-excel',\n      'application/x-excel',\n      'application/x-msexcel'\n    ];\n    return validTypes.includes(file.type) || \n           file.name.endsWith('.xlsx') || \n           file.name.endsWith('.xls');\n  };\n\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files[0]) {\n      const selectedFile = e.target.files[0];\n      if (isValidFileType(selectedFile)) {\n        setFile(selectedFile);\n        setResult(null);\n      } else {\n        toast({\n          title: \"Invalid file type\",\n          description: \"Please upload an Excel file (.xlsx or .xls)\",\n          variant: \"destructive\"\n        });\n      }\n    }\n  };\n\n  const handleUpload = async () => {\n    if (!file) return;\n\n    setUploading(true);\n    try {\n      const formData = new FormData();\n      formData.append('excel', file);\n\n      // Get CSRF token for the request\n      const csrfResponse = await fetch('/api/csrf-token', {\n        credentials: 'include'\n      });\n      const { csrfToken } = await csrfResponse.json();\n\n      const response = await fetch(endpoint, {\n        method: 'POST',\n        body: formData,\n        credentials: 'include',\n        headers: {\n          'X-CSRF-Token': csrfToken\n        }\n        // Don't set Content-Type for FormData - let browser set it with boundary\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        setResult(data.results);\n        toast({\n          title: \"Upload completed\",\n          description: data.message,\n          variant: data.results.failed > 0 ? \"destructive\" : \"default\"\n        });\n        \n        if (data.results.success > 0 && onSuccess) {\n          onSuccess();\n        }\n      } else {\n        const error = await response.json();\n        toast({\n          title: \"Upload failed\",\n          description: error.message || \"Failed to upload file\",\n          variant: \"destructive\"\n        });\n      }\n    } catch (error) {\n      console.error(\"Upload error:\", error);\n      toast({\n        title: \"Upload failed\",\n        description: \"Network error occurred while uploading\",\n        variant: \"destructive\"\n      });\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  const clearFile = () => {\n    setFile(null);\n    setResult(null);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  return (\n    <Card className=\"w-full max-w-2xl\">\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <Upload className=\"w-5 h-5\" />\n          {title}\n        </CardTitle>\n        <CardDescription>{description}</CardDescription>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        {/* Template Download */}\n        <div className=\"flex items-center justify-between p-3 bg-muted rounded-lg\">\n          <div>\n            <p className=\"text-sm font-medium\">Download Template</p>\n            <p className=\"text-xs text-muted-foreground\">\n              Download Excel template with required headers\n            </p>\n          </div>\n          <Button variant=\"outline\" size=\"sm\" onClick={downloadTemplate} data-testid=\"button-download-template\">\n            <Download className=\"w-4 h-4 mr-2\" />\n            Template\n          </Button>\n        </div>\n\n        {/* File Upload Area */}\n        <div\n          className={`\n            border-2 border-dashed rounded-lg p-8 text-center transition-colors\n            ${dragActive ? 'border-primary bg-primary/5' : 'border-muted-foreground/25'}\n            ${file ? 'bg-muted/50' : ''}\n          `}\n          onDragEnter={handleDrag}\n          onDragLeave={handleDrag}\n          onDragOver={handleDrag}\n          onDrop={handleDrop}\n        >\n          {file ? (\n            <div className=\"space-y-2\">\n              <File className=\"w-8 h-8 mx-auto text-primary\" />\n              <p className=\"font-medium\" data-testid=\"selected-filename\">{file.name}</p>\n              <p className=\"text-sm text-muted-foreground\">\n                {(file.size / 1024 / 1024).toFixed(2)} MB\n              </p>\n              <Button variant=\"outline\" size=\"sm\" onClick={clearFile} data-testid=\"button-clear-file\">\n                Choose Different File\n              </Button>\n            </div>\n          ) : (\n            <div className=\"space-y-2\">\n              <Upload className=\"w-8 h-8 mx-auto text-muted-foreground\" />\n              <p className=\"font-medium\">Drop Excel file here or click to browse</p>\n              <p className=\"text-sm text-muted-foreground\">\n                Supports .xlsx and .xls files up to 10MB\n              </p>\n              <Button \n                variant=\"outline\" \n                onClick={() => fileInputRef.current?.click()}\n                data-testid=\"button-browse-file\"\n              >\n                Browse Files\n              </Button>\n            </div>\n          )}\n        </div>\n\n        <input\n          ref={fileInputRef}\n          type=\"file\"\n          accept=\".xlsx,.xls\"\n          onChange={handleFileSelect}\n          className=\"hidden\"\n          data-testid=\"file-input\"\n        />\n\n        {/* Upload Button */}\n        {file && (\n          <Button \n            onClick={handleUpload} \n            disabled={uploading} \n            className=\"w-full\"\n            data-testid=\"button-upload\"\n          >\n            {uploading ? \"Uploading...\" : \"Upload and Process\"}\n          </Button>\n        )}\n\n        {/* Upload Progress */}\n        {uploading && (\n          <div className=\"space-y-2\">\n            <Progress value={50} className=\"w-full\" />\n            <p className=\"text-sm text-center text-muted-foreground\">\n              Processing your Excel file...\n            </p>\n          </div>\n        )}\n\n        {/* Results */}\n        {result && (\n          <div className=\"space-y-3\">\n            {result.success > 0 && (\n              <Alert className=\"border-green-200 bg-green-50\" data-testid=\"success-alert\">\n                <CheckCircle2 className=\"h-4 w-4 text-green-600\" />\n                <AlertDescription className=\"text-green-800\">\n                  Successfully processed {result.success} records\n                </AlertDescription>\n              </Alert>\n            )}\n\n            {result.failed > 0 && (\n              <Alert variant=\"destructive\" data-testid=\"error-alert\">\n                <AlertCircle className=\"h-4 w-4\" />\n                <AlertDescription>\n                  {result.failed} records failed to process. Check the errors below:\n                  <div className=\"mt-2 max-h-40 overflow-y-auto space-y-1\">\n                    {result.errors.slice(0, 5).map((error, index) => (\n                      <div key={index} className=\"text-xs bg-destructive/10 p-2 rounded\">\n                        <strong>Row {error.row}:</strong> {\n                          Array.isArray(error.error) \n                            ? error.error.map(e => e.message).join(', ')\n                            : error.error\n                        }\n                      </div>\n                    ))}\n                    {result.errors.length > 5 && (\n                      <p className=\"text-xs\">...and {result.errors.length - 5} more errors</p>\n                    )}\n                  </div>\n                </AlertDescription>\n              </Alert>\n            )}\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":10044},"client/src/components/forms/production-form.tsx":{"content":"import { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Button } from \"@/components/ui/button\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport type { Product } from \"@shared/schema\";\n\nconst productionFormSchema = z.object({\n  productId: z.number().min(1, \"Product is required\"),\n  quantityKg: z.string().min(1, \"Quantity is required\"),\n  date: z.string().min(1, \"Date is required\"),\n});\n\ntype ProductionFormData = z.infer<typeof productionFormSchema>;\n\ninterface ProductionFormProps {\n  products: Product[];\n  onSubmit: (data: ProductionFormData) => void;\n  isLoading: boolean;\n  defaultValues?: Partial<ProductionFormData>;\n}\n\nexport default function ProductionForm({ products, onSubmit, isLoading, defaultValues }: ProductionFormProps) {\n  const form = useForm<ProductionFormData>({\n    resolver: zodResolver(productionFormSchema),\n    defaultValues: {\n      productId: defaultValues?.productId || 0,\n      quantityKg: defaultValues?.quantityKg || \"\",\n      date: defaultValues?.date || new Date().toISOString().split('T')[0],\n    },\n  });\n\n  const handleSubmit = (data: ProductionFormData) => {\n    onSubmit(data);\n  };\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(handleSubmit)} className=\"space-y-4\" data-testid=\"production-form\">\n        <FormField\n          control={form.control}\n          name=\"productId\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Product</FormLabel>\n              <Select onValueChange={(value) => field.onChange(parseInt(value))} value={field.value?.toString()}>\n                <FormControl>\n                  <SelectTrigger data-testid=\"select-production-product\">\n                    <SelectValue placeholder=\"Select a product\" />\n                  </SelectTrigger>\n                </FormControl>\n                <SelectContent>\n                  {products.map((product) => (\n                    <SelectItem key={product.id} value={product.id.toString()}>\n                      {product.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        <FormField\n          control={form.control}\n          name=\"quantityKg\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Quantity (KG)</FormLabel>\n              <FormControl>\n                <Input\n                  type=\"number\"\n                  step=\"0.001\"\n                  placeholder=\"e.g., 2.5\"\n                  {...field}\n                  data-testid=\"input-production-quantity\"\n                />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        <FormField\n          control={form.control}\n          name=\"date\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Date</FormLabel>\n              <FormControl>\n                <Input type=\"date\" {...field} data-testid=\"input-production-date\" />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        <div className=\"flex space-x-3 pt-4\">\n          <Button type=\"button\" variant=\"outline\" className=\"flex-1\" data-testid=\"button-cancel-production\">\n            Cancel\n          </Button>\n          <Button type=\"submit\" className=\"flex-1\" disabled={isLoading} data-testid=\"button-save-production\">\n            {isLoading ? \"Saving...\" : \"Save Record\"}\n          </Button>\n        </div>\n      </form>\n    </Form>\n  );\n}\n","size_bytes":3855},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/forms/sales-form.tsx":{"content":"import { useState } from \"react\";\nimport { useForm, useFieldArray } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Button } from \"@/components/ui/button\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Plus, Trash2 } from \"lucide-react\";\nimport type { Party, Product } from \"@shared/schema\";\n\nconst salesItemSchema = z.object({\n  productId: z.number().min(1, \"Product is required\"),\n  quantity: z.number().min(1, \"Quantity must be at least 1\"),\n});\n\nconst salesFormSchema = z.object({\n  orderNumber: z.string().min(1, \"Order number is required\"),\n  partyId: z.number().min(1, \"Party is required\"),\n  date: z.string().min(1, \"Date is required\"),\n  items: z.array(salesItemSchema).min(1, \"At least one item is required\"),\n});\n\ntype SalesFormData = z.infer<typeof salesFormSchema>;\n\ninterface SalesFormProps {\n  parties: Party[];\n  products: Product[];\n  onSubmit: (data: { order: Omit<SalesFormData, 'items'>; items: SalesFormData['items'] }) => void;\n  isLoading: boolean;\n}\n\nexport default function SalesForm({ parties, products, onSubmit, isLoading }: SalesFormProps) {\n  const form = useForm<SalesFormData>({\n    resolver: zodResolver(salesFormSchema),\n    defaultValues: {\n      orderNumber: `SO-${new Date().getFullYear()}-${String(Date.now()).slice(-6)}`,\n      partyId: 0,\n      date: new Date().toISOString().split('T')[0],\n      items: [{ productId: 0, quantity: 1 }],\n    },\n  });\n\n  const { fields, append, remove } = useFieldArray({\n    control: form.control,\n    name: \"items\",\n  });\n\n  const handleSubmit = (data: SalesFormData) => {\n    const { items, ...order } = data;\n    onSubmit({ order, items });\n  };\n\n  const addItem = () => {\n    append({ productId: 0, quantity: 1 });\n  };\n\n  const removeItem = (index: number) => {\n    if (fields.length > 1) {\n      remove(index);\n    }\n  };\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(handleSubmit)} className=\"space-y-6\" data-testid=\"sales-form\">\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <FormField\n            control={form.control}\n            name=\"orderNumber\"\n            render={({ field }) => (\n              <FormItem>\n                <FormLabel>Order Number</FormLabel>\n                <FormControl>\n                  <Input placeholder=\"SO-2024-001\" {...field} data-testid=\"input-order-number\" />\n                </FormControl>\n                <FormMessage />\n              </FormItem>\n            )}\n          />\n\n          <FormField\n            control={form.control}\n            name=\"partyId\"\n            render={({ field }) => (\n              <FormItem>\n                <FormLabel>Party</FormLabel>\n                <Select onValueChange={(value) => field.onChange(parseInt(value))} value={field.value?.toString()}>\n                  <FormControl>\n                    <SelectTrigger data-testid=\"select-party\">\n                      <SelectValue placeholder=\"Select a party\" />\n                    </SelectTrigger>\n                  </FormControl>\n                  <SelectContent>\n                    {parties.map((party) => (\n                      <SelectItem key={party.id} value={party.id.toString()}>\n                        {party.name}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n                <FormMessage />\n              </FormItem>\n            )}\n          />\n\n          <FormField\n            control={form.control}\n            name=\"date\"\n            render={({ field }) => (\n              <FormItem>\n                <FormLabel>Date</FormLabel>\n                <FormControl>\n                  <Input type=\"date\" {...field} data-testid=\"input-order-date\" />\n                </FormControl>\n                <FormMessage />\n              </FormItem>\n            )}\n          />\n        </div>\n\n        <Card>\n          <CardHeader>\n            <div className=\"flex items-center justify-between\">\n              <CardTitle>Order Items</CardTitle>\n              <Button type=\"button\" variant=\"outline\" size=\"sm\" onClick={addItem} data-testid=\"button-add-item\">\n                <Plus className=\"w-4 h-4 mr-2\" />\n                Add Item\n              </Button>\n            </div>\n          </CardHeader>\n          <CardContent className=\"space-y-4 max-h-96 overflow-y-auto\">\n            {fields.map((field, index) => (\n              <div key={field.id} className=\"grid grid-cols-1 md:grid-cols-3 gap-4 items-end\" data-testid={`order-item-${index}`}>\n                <FormField\n                  control={form.control}\n                  name={`items.${index}.productId`}\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Product</FormLabel>\n                      <Select onValueChange={(value) => field.onChange(parseInt(value))} value={field.value?.toString()}>\n                        <FormControl>\n                          <SelectTrigger data-testid={`select-product-${index}`}>\n                            <SelectValue placeholder=\"Select product\" />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          {products.map((product) => (\n                            <SelectItem key={product.id} value={product.id.toString()}>\n                              {product.name}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name={`items.${index}.quantity`}\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Quantity (pieces)</FormLabel>\n                      <FormControl>\n                        <Input\n                          type=\"number\"\n                          min=\"1\"\n                          placeholder=\"e.g., 100\"\n                          {...field}\n                          onChange={(e) => field.onChange(parseInt(e.target.value) || 1)}\n                          data-testid={`input-quantity-${index}`}\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <Button\n                  type=\"button\"\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => removeItem(index)}\n                  disabled={fields.length === 1}\n                  data-testid={`button-remove-item-${index}`}\n                >\n                  <Trash2 className=\"w-4 h-4\" />\n                </Button>\n              </div>\n            ))}\n          </CardContent>\n        </Card>\n\n        <div className=\"flex space-x-3 pt-4\">\n          <Button type=\"button\" variant=\"outline\" className=\"flex-1\" data-testid=\"button-cancel-sales\">\n            Cancel\n          </Button>\n          <Button type=\"submit\" className=\"flex-1\" disabled={isLoading} data-testid=\"button-save-sales\">\n            {isLoading ? \"Creating...\" : \"Create Order\"}\n          </Button>\n        </div>\n      </form>\n    </Form>\n  );\n}\n","size_bytes":7650},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/pages/sales.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from \"@/components/ui/alert-dialog\";\nimport { Plus } from \"lucide-react\";\nimport SalesForm from \"@/components/forms/sales-form\";\nimport SalesTable from \"@/components/tables/sales-table\";\nimport { api } from \"@/lib/api\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function Sales() {\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [isDeleteDialogOpen, setIsDeleteDialogOpen] = useState(false);\n  const [selectedOrderId, setSelectedOrderId] = useState<number | null>(null);\n  const { toast } = useToast();\n\n  const { data: salesOrders, isLoading } = useQuery({\n    queryKey: [\"/api/sales\"],\n    queryFn: api.getSalesOrders,\n  });\n\n  const { data: parties } = useQuery({\n    queryKey: [\"/api/parties\"],\n    queryFn: api.getParties,\n  });\n\n  const { data: products } = useQuery({\n    queryKey: [\"/api/products\"],\n    queryFn: api.getProducts,\n  });\n\n  const createSalesOrderMutation = useMutation({\n    mutationFn: api.createSalesOrder,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/sales\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/metrics\"] });\n      setIsDialogOpen(false);\n      toast({\n        title: \"Success\",\n        description: \"Sales order created successfully\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to create sales order\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const fulfillOrderMutation = useMutation({\n    mutationFn: ({ id, data }: { id: number; data: any }) => api.fulfillOrder(id, data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/sales\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/inventory\"] });\n      toast({\n        title: \"Success\",\n        description: \"Order fulfilled successfully\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to fulfill order\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteSalesOrderMutation = useMutation({\n    mutationFn: api.deleteSalesOrder,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/sales\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/metrics\"] });\n      setIsDeleteDialogOpen(false);\n      setSelectedOrderId(null);\n      toast({\n        title: \"Success\",\n        description: \"Sales order deleted successfully\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to delete sales order\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const cancelInvoiceMutation = useMutation({\n    mutationFn: api.cancelInvoice,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/sales\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/metrics\"] });\n      toast({\n        title: \"Success\",\n        description: \"Invoice cancelled successfully\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to cancel invoice\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleCreateSalesOrder = (data: any) => {\n    createSalesOrderMutation.mutate(data);\n  };\n\n  const handleFulfillOrder = (orderId: number, fulfillments: any) => {\n    fulfillOrderMutation.mutate({ id: orderId, data: { fulfillments } });\n  };\n\n  const handleDeleteOrder = (orderId: number) => {\n    setSelectedOrderId(orderId);\n    setIsDeleteDialogOpen(true);\n  };\n\n  const handleConfirmDelete = () => {\n    if (selectedOrderId) {\n      deleteSalesOrderMutation.mutate(selectedOrderId);\n    }\n  };\n\n  const handleCancelInvoice = (orderId: number) => {\n    cancelInvoiceMutation.mutate(orderId);\n  };\n\n  if (isLoading) {\n    return <div data-testid=\"loading-sales\">Loading sales orders...</div>;\n  }\n\n  return (\n    <div data-testid=\"sales-page\">\n      <Card>\n        <CardHeader>\n          <div className=\"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between\">\n            <div className=\"min-w-0\">\n              <CardTitle data-testid=\"sales-title\">Sales Orders</CardTitle>\n              <p className=\"text-muted-foreground text-sm mt-1 hidden sm:block\" data-testid=\"sales-description\">\n                Create and manage sales orders with order tracking and fulfillment\n              </p>\n            </div>\n            <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\n              <DialogTrigger asChild>\n                <Button data-testid=\"button-create-order\" className=\"flex-shrink-0\">\n                  <Plus className=\"w-4 h-4 mr-2\" />\n                  Create Order\n                </Button>\n              </DialogTrigger>\n              <DialogContent className=\"max-w-4xl\" data-testid=\"create-order-dialog\">\n                <DialogHeader>\n                  <DialogTitle>Create Sales Order</DialogTitle>\n                </DialogHeader>\n                <SalesForm\n                  parties={parties || []}\n                  products={products || []}\n                  onSubmit={handleCreateSalesOrder}\n                  isLoading={createSalesOrderMutation.isPending}\n                />\n              </DialogContent>\n            </Dialog>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <SalesTable\n            salesOrders={salesOrders || []}\n            onFulfill={handleFulfillOrder}\n            isFulfilling={fulfillOrderMutation.isPending}\n            onDelete={handleDeleteOrder}\n            onCancel={handleCancelInvoice}\n            isDeleting={deleteSalesOrderMutation.isPending}\n            isCancelling={cancelInvoiceMutation.isPending}\n          />\n        </CardContent>\n      </Card>\n\n      {/* Delete Confirmation Dialog */}\n      <AlertDialog open={isDeleteDialogOpen} onOpenChange={setIsDeleteDialogOpen}>\n        <AlertDialogContent data-testid=\"delete-sales-order-dialog\">\n          <AlertDialogHeader>\n            <AlertDialogTitle>Delete Sales Order</AlertDialogTitle>\n            <AlertDialogDescription>\n              Are you sure you want to delete this sales order? This action cannot be undone and will not restore inventory levels.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel data-testid=\"button-cancel-delete\">Cancel</AlertDialogCancel>\n            <AlertDialogAction \n              onClick={handleConfirmDelete}\n              className=\"bg-red-600 hover:bg-red-700\"\n              data-testid=\"button-confirm-delete\"\n            >\n              Delete\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  );\n}\n","size_bytes":7257},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n      colors: {\n        background: \"var(--background)\",\n        foreground: \"var(--foreground)\",\n        card: {\n          DEFAULT: \"var(--card)\",\n          foreground: \"var(--card-foreground)\",\n        },\n        popover: {\n          DEFAULT: \"var(--popover)\",\n          foreground: \"var(--popover-foreground)\",\n        },\n        primary: {\n          DEFAULT: \"var(--primary)\",\n          foreground: \"var(--primary-foreground)\",\n        },\n        secondary: {\n          DEFAULT: \"var(--secondary)\",\n          foreground: \"var(--secondary-foreground)\",\n        },\n        muted: {\n          DEFAULT: \"var(--muted)\",\n          foreground: \"var(--muted-foreground)\",\n        },\n        accent: {\n          DEFAULT: \"var(--accent)\",\n          foreground: \"var(--accent-foreground)\",\n        },\n        destructive: {\n          DEFAULT: \"var(--destructive)\",\n          foreground: \"var(--destructive-foreground)\",\n        },\n        border: \"var(--border)\",\n        input: \"var(--input)\",\n        ring: \"var(--ring)\",\n        chart: {\n          \"1\": \"var(--chart-1)\",\n          \"2\": \"var(--chart-2)\",\n          \"3\": \"var(--chart-3)\",\n          \"4\": \"var(--chart-4)\",\n          \"5\": \"var(--chart-5)\",\n        },\n        sidebar: {\n          DEFAULT: \"var(--sidebar-background)\",\n          foreground: \"var(--sidebar-foreground)\",\n          primary: \"var(--sidebar-primary)\",\n          \"primary-foreground\": \"var(--sidebar-primary-foreground)\",\n          accent: \"var(--sidebar-accent)\",\n          \"accent-foreground\": \"var(--sidebar-accent-foreground)\",\n          border: \"var(--sidebar-border)\",\n          ring: \"var(--sidebar-ring)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: {\n            height: \"0\",\n          },\n          to: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n        },\n        \"accordion-up\": {\n          from: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n          to: {\n            height: \"0\",\n          },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":2766},"client/src/lib/api.ts":{"content":"import { apiRequest } from \"./queryClient\";\n\nexport const api = {\n  // Products\n  getProducts: () => fetch(\"/api/products\").then(res => res.json()),\n  createProduct: (data: any) => apiRequest(\"POST\", \"/api/products\", data),\n  updateProduct: (id: number, data: any) => apiRequest(\"PUT\", `/api/products/${id}`, data),\n  deleteProduct: (id: number) => apiRequest(\"DELETE\", `/api/products/${id}`),\n\n  // Parties\n  getParties: () => fetch(\"/api/parties\").then(res => res.json()),\n  createParty: (data: any) => apiRequest(\"POST\", \"/api/parties\", data),\n  updateParty: (id: number, data: any) => apiRequest(\"PUT\", `/api/parties/${id}`, data),\n  deleteParty: (id: number) => apiRequest(\"DELETE\", `/api/parties/${id}`),\n\n  // Production\n  getProduction: () => fetch(\"/api/production\").then(res => res.json()),\n  createProduction: (data: any) => apiRequest(\"POST\", \"/api/production\", data),\n  updateProduction: (id: number, data: any) => apiRequest(\"PUT\", `/api/production/${id}`, data),\n  deleteProduction: (id: number) => apiRequest(\"DELETE\", `/api/production/${id}`),\n\n  // Sales\n  getSalesOrders: () => fetch(\"/api/sales\").then(res => res.json()),\n  getSalesOrder: (id: number) => fetch(`/api/sales/${id}`).then(res => res.json()),\n  createSalesOrder: (data: any) => apiRequest(\"POST\", \"/api/sales\", data),\n  fulfillOrder: (id: number, data: any) => apiRequest(\"POST\", `/api/sales/${id}/fulfill`, data),\n  deleteSalesOrder: (id: number) => apiRequest(\"DELETE\", `/api/sales/${id}`),\n  cancelInvoice: (id: number) => apiRequest(\"PUT\", `/api/sales/${id}/cancel`),\n\n  // Stock Adjustments\n  getStockAdjustments: () => fetch(\"/api/stock-adjustments\").then(res => res.json()),\n  createStockAdjustment: (data: any) => apiRequest(\"POST\", \"/api/stock-adjustments\", data),\n\n  // Inventory\n  getInventory: () => fetch(\"/api/inventory\").then(res => res.json()),\n\n  // Dashboard\n  getDashboardMetrics: () => fetch(\"/api/dashboard/metrics\").then(res => res.json()),\n};\n","size_bytes":1949},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/forms/party-form.tsx":{"content":"import { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Button } from \"@/components/ui/button\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\n\nconst partyFormSchema = z.object({\n  name: z.string().min(1, \"Party name is required\"),\n  address: z.string().min(1, \"Address is required\"),\n  pinCode: z.string().min(1, \"PIN code is required\"),\n  phoneNumber: z.string().min(1, \"Phone number is required\"),\n  gstNumber: z.string().optional(),\n});\n\ntype PartyFormData = z.infer<typeof partyFormSchema>;\n\ninterface PartyFormProps {\n  onSubmit: (data: PartyFormData) => void;\n  isLoading: boolean;\n  initialData?: Partial<PartyFormData>;\n}\n\nexport default function PartyForm({ onSubmit, isLoading, initialData }: PartyFormProps) {\n  const form = useForm<PartyFormData>({\n    resolver: zodResolver(partyFormSchema),\n    defaultValues: {\n      name: initialData?.name || \"\",\n      address: initialData?.address || \"\",\n      pinCode: initialData?.pinCode || \"\",\n      phoneNumber: initialData?.phoneNumber || \"\",\n      gstNumber: initialData?.gstNumber || \"\",\n    },\n  });\n\n  const handleSubmit = (data: PartyFormData) => {\n    onSubmit(data);\n  };\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(handleSubmit)} className=\"space-y-4\" data-testid=\"party-form\">\n        <FormField\n          control={form.control}\n          name=\"name\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Party Name</FormLabel>\n              <FormControl>\n                <Input placeholder=\"e.g., ABC Hardware\" {...field} data-testid=\"input-party-name\" />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        <FormField\n          control={form.control}\n          name=\"address\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Address</FormLabel>\n              <FormControl>\n                <Textarea placeholder=\"Full address\" {...field} data-testid=\"textarea-party-address\" />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        <FormField\n          control={form.control}\n          name=\"pinCode\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>PIN Code</FormLabel>\n              <FormControl>\n                <Input placeholder=\"e.g., 400001\" {...field} data-testid=\"input-party-pincode\" />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        <FormField\n          control={form.control}\n          name=\"phoneNumber\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Phone Number</FormLabel>\n              <FormControl>\n                <Input placeholder=\"e.g., +91 9876543210\" {...field} data-testid=\"input-party-phone\" />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        <FormField\n          control={form.control}\n          name=\"gstNumber\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>GST Number (Optional)</FormLabel>\n              <FormControl>\n                <Input placeholder=\"e.g., 27AABCU9603R1ZX\" {...field} data-testid=\"input-party-gst\" />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        <div className=\"flex space-x-3 pt-4\">\n          <Button type=\"button\" variant=\"outline\" className=\"flex-1\" data-testid=\"button-cancel-party\">\n            Cancel\n          </Button>\n          <Button type=\"submit\" className=\"flex-1\" disabled={isLoading} data-testid=\"button-save-party\">\n            {isLoading ? \"Saving...\" : \"Save Party\"}\n          </Button>\n        </div>\n      </form>\n    </Form>\n  );\n}\n","size_bytes":4036},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1128},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":791},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/sidebar.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { cn } from \"@/lib/utils\"\n\nconst sidebarVariants = cva(\n  \"flex h-full w-full flex-col bg-sidebar text-sidebar-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"border-r border-sidebar-border\",\n        floating: \"rounded-lg border border-sidebar-border shadow-lg\",\n      },\n      side: {\n        left: \"\",\n        right: \"\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      side: \"left\",\n    },\n  }\n)\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof sidebarVariants>\n>(({ className, variant, side, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(sidebarVariants({ variant, side }), className)}\n    {...props}\n  />\n))\nSidebar.displayName = \"Sidebar\"\n\nconst SidebarHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center gap-2 p-4\", className)}\n    {...props}\n  />\n))\nSidebarHeader.displayName = \"SidebarHeader\"\n\nconst SidebarContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex-1 overflow-auto p-4\", className)}\n    {...props}\n  />\n))\nSidebarContent.displayName = \"SidebarContent\"\n\nconst SidebarFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"p-4\", className)}\n    {...props}\n  />\n))\nSidebarFooter.displayName = \"SidebarFooter\"\n\nconst SidebarNav = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"space-y-1\", className)}\n    {...props}\n  />\n))\nSidebarNav.displayName = \"SidebarNav\"\n\nconst SidebarNavItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarNavItem.displayName = \"SidebarNavItem\"\n\nexport {\n  Sidebar,\n  SidebarHeader,\n  SidebarContent,\n  SidebarFooter,\n  SidebarNav,\n  SidebarNavItem,\n}\n","size_bytes":2489},"client/src/components/forms/product-form.tsx":{"content":"import { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Button } from \"@/components/ui/button\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\n\nconst productFormSchema = z.object({\n  name: z.string().min(1, \"Product name is required\"),\n  weightGrams: z.string().min(1, \"Weight is required\"),\n  rawMaterialType: z.string().min(1, \"Raw material type is required\"),\n  rawMaterialPricePerKg: z.string().min(1, \"Material price is required\"),\n});\n\ntype ProductFormData = z.infer<typeof productFormSchema>;\n\ninterface ProductFormProps {\n  onSubmit: (data: ProductFormData) => void;\n  isLoading: boolean;\n}\n\n\nexport default function ProductForm({ onSubmit, isLoading }: ProductFormProps) {\n  const form = useForm<ProductFormData>({\n    resolver: zodResolver(productFormSchema),\n    defaultValues: {\n      name: \"\",\n      weightGrams: \"\",\n      rawMaterialType: \"\",\n      rawMaterialPricePerKg: \"\",\n    },\n  });\n\n  const handleSubmit = (data: ProductFormData) => {\n    onSubmit(data);\n  };\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(handleSubmit)} className=\"space-y-4\" data-testid=\"product-form\">\n        <FormField\n          control={form.control}\n          name=\"name\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Product Name</FormLabel>\n              <FormControl>\n                <Input placeholder=\"e.g., Cotter Pin 5mm\" {...field} data-testid=\"input-product-name\" />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        <FormField\n          control={form.control}\n          name=\"weightGrams\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Weight (grams)</FormLabel>\n              <FormControl>\n                <Input type=\"number\" placeholder=\"e.g., 10\" {...field} data-testid=\"input-product-weight\" />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        <FormField\n          control={form.control}\n          name=\"rawMaterialType\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Raw Material Type</FormLabel>\n              <FormControl>\n                <Input placeholder=\"e.g., Mild Steel, Aluminum\" {...field} data-testid=\"input-material-type\" />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        <FormField\n          control={form.control}\n          name=\"rawMaterialPricePerKg\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>Material Cost (₹/kg)</FormLabel>\n              <FormControl>\n                <Input type=\"number\" placeholder=\"e.g., 55\" {...field} data-testid=\"input-material-price\" />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n\n        <div className=\"flex space-x-3 pt-4\">\n          <Button type=\"button\" variant=\"outline\" className=\"flex-1\" data-testid=\"button-cancel-product\">\n            Cancel\n          </Button>\n          <Button type=\"submit\" className=\"flex-1\" disabled={isLoading} data-testid=\"button-save-product\">\n            {isLoading ? \"Saving...\" : \"Save Product\"}\n          </Button>\n        </div>\n      </form>\n    </Form>\n  );\n}\n","size_bytes":3478},"client/src/pages/products.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Plus, Upload } from \"lucide-react\";\nimport ProductForm from \"@/components/forms/product-form\";\nimport ProductsTable from \"@/components/tables/products-table\";\nimport BulkUpload from \"@/components/forms/bulk-upload\";\nimport { api } from \"@/lib/api\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function Products() {\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [isBulkUploadOpen, setIsBulkUploadOpen] = useState(false);\n  const { toast } = useToast();\n\n  const { data: products, isLoading } = useQuery({\n    queryKey: [\"/api/products\"],\n    queryFn: api.getProducts,\n  });\n\n  const createProductMutation = useMutation({\n    mutationFn: api.createProduct,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/products\"] });\n      setIsDialogOpen(false);\n      toast({\n        title: \"Success\",\n        description: \"Product created successfully\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to create product\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteProductMutation = useMutation({\n    mutationFn: api.deleteProduct,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/products\"] });\n      toast({\n        title: \"Success\",\n        description: \"Product deleted successfully\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to delete product\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleCreateProduct = (data: any) => {\n    createProductMutation.mutate(data);\n  };\n\n  const handleDeleteProduct = (id: number) => {\n    deleteProductMutation.mutate(id);\n  };\n\n  const handleBulkUploadSuccess = () => {\n    queryClient.invalidateQueries({ queryKey: [\"/api/products\"] });\n    setIsBulkUploadOpen(false);\n  };\n\n  if (isLoading) {\n    return <div data-testid=\"loading-products\">Loading products...</div>;\n  }\n\n  return (\n    <div data-testid=\"products-page\">\n      <Card>\n        <CardHeader>\n          <div className=\"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between\">\n            <div className=\"min-w-0\">\n              <CardTitle data-testid=\"products-title\">Product Master</CardTitle>\n              <p className=\"text-muted-foreground text-sm mt-1 hidden sm:block\" data-testid=\"products-description\">\n                Manage your product catalog with weight, material, and cost information\n              </p>\n            </div>\n            <div className=\"flex gap-2 flex-shrink-0\">\n              <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\n                <DialogTrigger asChild>\n                  <Button data-testid=\"button-add-product\" className=\"flex-1 sm:flex-none\">\n                    <Plus className=\"w-4 h-4 mr-2\" />\n                    Add Product\n                  </Button>\n                </DialogTrigger>\n                <DialogContent data-testid=\"add-product-dialog\">\n                  <DialogHeader>\n                    <DialogTitle>Add New Product</DialogTitle>\n                  </DialogHeader>\n                  <ProductForm\n                    onSubmit={handleCreateProduct}\n                    isLoading={createProductMutation.isPending}\n                  />\n                </DialogContent>\n              </Dialog>\n\n              <Dialog open={isBulkUploadOpen} onOpenChange={setIsBulkUploadOpen}>\n                <DialogTrigger asChild>\n                  <Button variant=\"outline\" data-testid=\"button-bulk-upload-products\" className=\"flex-1 sm:flex-none\">\n                    <Upload className=\"w-4 h-4 mr-2\" />\n                    Bulk Upload\n                  </Button>\n                </DialogTrigger>\n                <DialogContent className=\"max-w-4xl\" data-testid=\"bulk-upload-products-dialog\">\n                  <DialogHeader>\n                    <DialogTitle>Bulk Upload Products</DialogTitle>\n                  </DialogHeader>\n                  <BulkUpload\n                    endpoint=\"/api/products/bulk\"\n                    title=\"Bulk Upload Products\"\n                    description=\"Upload multiple products at once using an Excel file\"\n                    templateHeaders={['Product Name', 'Weight (grams)', 'Material Type', 'Material Price/KG']}\n                    onSuccess={handleBulkUploadSuccess}\n                  />\n                </DialogContent>\n              </Dialog>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <ProductsTable\n            products={products || []}\n            onDelete={handleDeleteProduct}\n            isDeleting={deleteProductMutation.isPending}\n          />\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":5121},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":1080},"client/src/components/kpi-cards.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { Hammer, ShoppingCart, AlertTriangle, DollarSign } from \"lucide-react\";\n\ninterface KPICardsProps {\n  metrics: {\n    todayProduction: number;\n    yesterdayProduction: number;\n    pendingOrders: number;\n    urgentOrders: number;\n    lowStockItems: number;\n    monthlyExpense: number;\n  };\n}\n\nexport default function KPICards({ metrics }: KPICardsProps) {\n  // Calculate production change percentage\n  const productionChange = metrics.yesterdayProduction > 0\n    ? ((metrics.todayProduction - metrics.yesterdayProduction) / metrics.yesterdayProduction * 100).toFixed(1)\n    : null;\n  \n  const productionChangeText = productionChange \n    ? `${parseFloat(productionChange) >= 0 ? '+' : ''}${productionChange}% from yesterday`\n    : metrics.yesterdayProduction === 0 ? 'No data from yesterday' : '';\n  \n  const productionChangeType = productionChange && parseFloat(productionChange) >= 0 ? \"positive\" : \"negative\";\n\n  // Urgent orders text\n  const urgentOrdersText = metrics.urgentOrders > 0\n    ? `${metrics.urgentOrders} urgent ${metrics.urgentOrders === 1 ? 'order' : 'orders'}`\n    : 'All orders up to date';\n\n  const kpiData = [\n    {\n      title: \"Today's Production\",\n      value: metrics.todayProduction.toLocaleString(),\n      change: productionChangeText,\n      changeType: productionChangeType,\n      icon: Hammer,\n      iconBg: \"bg-blue-100\",\n      iconColor: \"text-blue-600\",\n      testId: \"kpi-production\"\n    },\n    {\n      title: \"Pending Orders\",\n      value: metrics.pendingOrders.toString(),\n      change: urgentOrdersText,\n      changeType: metrics.urgentOrders > 0 ? \"warning\" : \"positive\",\n      icon: ShoppingCart,\n      iconBg: \"bg-amber-100\",\n      iconColor: \"text-amber-600\",\n      testId: \"kpi-orders\"\n    },\n    {\n      title: \"Low Stock Items\",\n      value: metrics.lowStockItems.toString(),\n      change: metrics.lowStockItems > 0 ? \"Requires attention\" : \"Stock levels good\",\n      changeType: metrics.lowStockItems > 0 ? \"negative\" : \"positive\",\n      icon: AlertTriangle,\n      iconBg: \"bg-red-100\",\n      iconColor: \"text-destructive\",\n      testId: \"kpi-stock\"\n    },\n    {\n      title: \"Expense (Month)\",\n      value: `₹${(metrics.monthlyExpense / 100000).toFixed(1)}L`,\n      change: \"Material costs\",\n      changeType: \"neutral\",\n      icon: DollarSign,\n      iconBg: \"bg-purple-100\",\n      iconColor: \"text-purple-600\",\n      testId: \"kpi-expense\"\n    }\n  ];\n\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\" data-testid=\"kpi-cards\">\n      {kpiData.map((kpi) => {\n        const Icon = kpi.icon;\n        return (\n          <Card key={kpi.testId} data-testid={kpi.testId}>\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm text-muted-foreground\" data-testid={`${kpi.testId}-title`}>\n                    {kpi.title}\n                  </p>\n                  <p className=\"text-3xl font-bold\" data-testid={`${kpi.testId}-value`}>\n                    {kpi.value}\n                  </p>\n                  <p \n                    className={`text-sm ${\n                      kpi.changeType === \"positive\" \n                        ? \"text-green-600\" \n                        : kpi.changeType === \"warning\"\n                        ? \"text-amber-600\"\n                        : kpi.changeType === \"neutral\"\n                        ? \"text-muted-foreground\"\n                        : \"text-destructive\"\n                    }`}\n                    data-testid={`${kpi.testId}-change`}\n                  >\n                    {kpi.changeType === \"positive\" ? \"↗ \" : kpi.changeType === \"warning\" ? \"→ \" : kpi.changeType === \"neutral\" ? \"→ \" : \"↘ \"}\n                    {kpi.change}\n                  </p>\n                </div>\n                <div className={`w-12 h-12 ${kpi.iconBg} rounded-lg flex items-center justify-center`}>\n                  <Icon className={`w-6 h-6 ${kpi.iconColor}`} />\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        );\n      })}\n    </div>\n  );\n}\n","size_bytes":4182},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"server/replitAuth.ts":{"content":"// Authentication setup using Replit Auth integration\nimport * as client from \"openid-client\";\nimport { Strategy, type VerifyFunction } from \"openid-client/passport\";\n\nimport passport from \"passport\";\nimport session from \"express-session\";\nimport type { Express, RequestHandler } from \"express\";\nimport memoize from \"memoizee\";\nimport connectPg from \"connect-pg-simple\";\nimport { storage } from \"./storage\";\nimport crypto from \"crypto\";\n\nif (!process.env.REPLIT_DOMAINS) {\n  throw new Error(\"Environment variable REPLIT_DOMAINS not provided\");\n}\n\nconst getOidcConfig = memoize(\n  async () => {\n    return await client.discovery(\n      new URL(process.env.ISSUER_URL ?? \"https://replit.com/oidc\"),\n      process.env.REPL_ID!\n    );\n  },\n  { maxAge: 3600 * 1000 }\n);\n\nexport function getSession() {\n  const sessionTtl = 7 * 24 * 60 * 60 * 1000; // 1 week\n  const pgStore = connectPg(session);\n  const sessionStore = new pgStore({\n    conString: process.env.DATABASE_URL,\n    createTableIfMissing: false,\n    ttl: sessionTtl,\n    tableName: \"sessions\",\n  });\n  return session({\n    secret: process.env.SESSION_SECRET!,\n    store: sessionStore,\n    resave: false,\n    saveUninitialized: false,\n    cookie: {\n      httpOnly: true,\n      secure: true,\n      sameSite: 'lax', // CSRF protection\n      maxAge: sessionTtl,\n    },\n  });\n}\n\nfunction updateUserSession(\n  user: any,\n  tokens: client.TokenEndpointResponse & client.TokenEndpointResponseHelpers\n) {\n  user.claims = tokens.claims();\n  user.access_token = tokens.access_token;\n  user.refresh_token = tokens.refresh_token;\n  user.expires_at = user.claims?.exp;\n}\n\nasync function upsertUser(\n  claims: any,\n) {\n  await storage.upsertUser({\n    id: claims[\"sub\"],\n    email: claims[\"email\"],\n    firstName: claims[\"first_name\"],\n    lastName: claims[\"last_name\"],\n    profileImageUrl: claims[\"profile_image_url\"],\n  });\n}\n\nexport async function setupAuth(app: Express) {\n  app.set(\"trust proxy\", 1);\n  app.use(getSession());\n  app.use(passport.initialize());\n  app.use(passport.session());\n\n  const config = await getOidcConfig();\n\n  const verify: VerifyFunction = async (\n    tokens: client.TokenEndpointResponse & client.TokenEndpointResponseHelpers,\n    verified: passport.AuthenticateCallback\n  ) => {\n    const user = {};\n    updateUserSession(user, tokens);\n    await upsertUser(tokens.claims());\n    verified(null, user);\n  };\n\n  for (const domain of process.env\n    .REPLIT_DOMAINS!.split(\",\")) {\n    const strategy = new Strategy(\n      {\n        name: `replitauth:${domain}`,\n        config,\n        scope: \"openid email profile offline_access\",\n        callbackURL: `https://${domain}/api/callback`,\n      },\n      verify,\n    );\n    passport.use(strategy);\n  }\n\n  passport.serializeUser((user: Express.User, cb) => cb(null, user));\n  passport.deserializeUser((user: Express.User, cb) => cb(null, user));\n\n  app.get(\"/api/login\", (req, res, next) => {\n    passport.authenticate(`replitauth:${req.hostname}`, {\n      prompt: \"login consent\",\n      scope: [\"openid\", \"email\", \"profile\", \"offline_access\"],\n    })(req, res, next);\n  });\n\n  app.get(\"/api/callback\", (req, res, next) => {\n    passport.authenticate(`replitauth:${req.hostname}`, {\n      successReturnToOrRedirect: \"/\",\n      failureRedirect: \"/api/login\",\n    })(req, res, next);\n  });\n\n  app.get(\"/api/logout\", (req, res) => {\n    req.logout(() => {\n      res.redirect(\n        client.buildEndSessionUrl(config, {\n          client_id: process.env.REPL_ID!,\n          post_logout_redirect_uri: `${req.protocol}://${req.hostname}`,\n        }).href\n      );\n    });\n  });\n\n  // CSRF token endpoint\n  app.get(\"/api/csrf-token\", isAuthenticated, (req: any, res) => {\n    const token = generateCSRFToken();\n    req.session.csrfToken = token;\n    res.json({ csrfToken: token });\n  });\n}\n\n// CSRF protection utilities\nfunction generateCSRFToken(): string {\n  return crypto.randomBytes(32).toString('hex');\n}\n\n// CSRF validation middleware for unsafe methods\nexport const validateCSRF: RequestHandler = (req: any, res, next) => {\n  const method = req.method.toUpperCase();\n  \n  // Only validate CSRF for unsafe methods\n  if (['POST', 'PUT', 'DELETE', 'PATCH'].includes(method)) {\n    const sessionToken = req.session?.csrfToken;\n    const requestToken = req.headers['x-csrf-token'] || req.body._csrf;\n    \n    if (!sessionToken || !requestToken || sessionToken !== requestToken) {\n      return res.status(403).json({ \n        message: \"CSRF token validation failed\",\n        code: \"CSRF_TOKEN_INVALID\" \n      });\n    }\n  }\n  \n  next();\n};\n\nexport const isAuthenticated: RequestHandler = async (req, res, next) => {\n  const user = req.user as any;\n\n  if (!req.isAuthenticated() || !user.expires_at) {\n    return res.status(401).json({ message: \"Unauthorized\" });\n  }\n\n  const now = Math.floor(Date.now() / 1000);\n  if (now <= user.expires_at) {\n    return next();\n  }\n\n  const refreshToken = user.refresh_token;\n  if (!refreshToken) {\n    res.status(401).json({ message: \"Unauthorized\" });\n    return;\n  }\n\n  try {\n    const config = await getOidcConfig();\n    const tokenResponse = await client.refreshTokenGrant(config, refreshToken);\n    updateUserSession(user, tokenResponse);\n    return next();\n  } catch (error) {\n    res.status(401).json({ message: \"Unauthorized\" });\n    return;\n  }\n};","size_bytes":5304},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/pages/reports.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { format, parseISO, isWithinInterval } from \"date-fns\";\nimport { api } from \"@/lib/api\";\n\nexport default function Reports() {\n  const [startDate, setStartDate] = useState<string>(\n    new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0]\n  );\n  const [endDate, setEndDate] = useState<string>(\n    new Date().toISOString().split('T')[0]\n  );\n\n  const { data: production } = useQuery({\n    queryKey: [\"/api/production\"],\n    queryFn: api.getProduction,\n  });\n\n  const { data: salesOrders } = useQuery({\n    queryKey: [\"/api/sales\"],\n    queryFn: api.getSalesOrders,\n  });\n\n  const { data: products } = useQuery({\n    queryKey: [\"/api/products\"],\n    queryFn: api.getProducts,\n  });\n\n  // Filter data by date range\n  const filteredProduction = production?.filter((record: any) => {\n    const recordDate = parseISO(record.date);\n    return isWithinInterval(recordDate, {\n      start: parseISO(startDate),\n      end: parseISO(endDate)\n    });\n  }) || [];\n\n  const filteredSales = salesOrders?.filter((order: any) => {\n    const orderDate = parseISO(order.date);\n    return isWithinInterval(orderDate, {\n      start: parseISO(startDate),\n      end: parseISO(endDate)\n    });\n  }) || [];\n\n  // Calculate product performance\n  const productPerformance = products?.map((product: any) => {\n    const productionRecords = filteredProduction.filter((p: any) => p.productId === product.id);\n    const totalProduced = productionRecords.reduce((sum: any, p: any) => sum + p.pieces, 0);\n    const totalMaterialUsed = productionRecords.reduce((sum: any, p: any) => \n      sum + parseFloat(p.quantityKg), 0\n    );\n\n    // Calculate sold quantities (this would need sales order items data in a real implementation)\n    const totalSold = 0; // Placeholder\n\n    return {\n      product,\n      totalProduced,\n      totalSold,\n      totalMaterialUsed,\n      materialType: product.rawMaterialType\n    };\n  }) || [];\n\n  // Material consumption summary\n  const materialConsumption = productPerformance.reduce((acc: any, item: any) => {\n    const material = item.materialType;\n    if (!acc[material]) {\n      acc[material] = { totalCost: 0, totalKg: 0 };\n    }\n    // totalMaterialUsed is already in kg, so add it directly\n    acc[material].totalKg += item.totalMaterialUsed;\n    // Calculate cost by multiplying kg by price per kg\n    acc[material].totalCost += item.totalMaterialUsed * parseFloat(item.product.rawMaterialPricePerKg);\n    return acc;\n  }, {} as Record<string, { totalCost: number; totalKg: number }>);\n\n  return (\n    <div className=\"space-y-6\" data-testid=\"reports-page\">\n      <Card>\n        <CardHeader>\n          <div className=\"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between\">\n            <div className=\"min-w-0\">\n              <CardTitle data-testid=\"reports-title\">Production Reports</CardTitle>\n              <p className=\"text-muted-foreground text-sm mt-1 hidden sm:block\" data-testid=\"reports-description\">\n                Analyze production performance and material consumption\n              </p>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          {/* Date Range Selection */}\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\n            <div>\n              <Label htmlFor=\"start-date\">Start Date</Label>\n              <Input\n                id=\"start-date\"\n                type=\"date\"\n                value={startDate}\n                onChange={(e) => setStartDate(e.target.value)}\n                data-testid=\"input-start-date\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"end-date\">End Date</Label>\n              <Input\n                id=\"end-date\"\n                type=\"date\"\n                value={endDate}\n                onChange={(e) => setEndDate(e.target.value)}\n                data-testid=\"input-end-date\"\n              />\n            </div>\n            <div className=\"flex items-end\">\n              <Button className=\"w-full\" data-testid=\"button-generate-report\">\n                Generate Report\n              </Button>\n            </div>\n          </div>\n\n          {/* Summary Cards */}\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n            <Card data-testid=\"summary-production\">\n              <CardContent className=\"p-6\">\n                <h3 className=\"text-lg font-semibold mb-2\">Total Production</h3>\n                <p className=\"text-3xl font-bold text-primary\" data-testid=\"total-production-pieces\">\n                  {filteredProduction.reduce((sum: any, p: any) => sum + p.pieces, 0).toLocaleString()}\n                </p>\n                <p className=\"text-sm text-muted-foreground\">pieces manufactured</p>\n              </CardContent>\n            </Card>\n\n            <Card data-testid=\"summary-orders\">\n              <CardContent className=\"p-6\">\n                <h3 className=\"text-lg font-semibold mb-2\">Sales Orders</h3>\n                <p className=\"text-3xl font-bold text-green-600\" data-testid=\"total-sales-orders\">\n                  {filteredSales.length}\n                </p>\n                <p className=\"text-sm text-muted-foreground\">orders created</p>\n              </CardContent>\n            </Card>\n\n            <Card data-testid=\"summary-material-used\">\n              <CardContent className=\"p-6\">\n                <h3 className=\"text-lg font-semibold mb-2\">Material Used</h3>\n                <p className=\"text-3xl font-bold text-amber-600\" data-testid=\"total-material-kg-value\">\n                  {(Object.values(materialConsumption) as { totalCost: number; totalKg: number }[])\n                    .reduce((sum: number, mat: { totalCost: number; totalKg: number }) => sum + mat.totalKg, 0)\n                    .toFixed(2)} kg\n                </p>\n                <p className=\"text-sm text-muted-foreground\">total raw materials consumed</p>\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Product Performance Table */}\n          <div className=\"mb-8\">\n            <h3 className=\"text-lg font-semibold mb-4\">Product Performance</h3>\n            <div className=\"overflow-x-auto max-h-96 overflow-y-auto\">\n              <table className=\"w-full border border-border rounded-lg\" data-testid=\"table-product-performance\">\n                <thead className=\"bg-muted\">\n                  <tr>\n                    <th className=\"text-left p-4 font-medium\">Product</th>\n                    <th className=\"text-left p-4 font-medium\">Produced</th>\n                    <th className=\"text-left p-4 font-medium\">Sold</th>\n                    <th className=\"text-left p-4 font-medium\">Material Used</th>\n                    <th className=\"text-left p-4 font-medium\">Raw Material</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {productPerformance.length === 0 ? (\n                    <tr>\n                      <td colSpan={5} className=\"p-8 text-center text-muted-foreground\" data-testid=\"no-performance-data\">\n                        No production data found for the selected date range.\n                      </td>\n                    </tr>\n                  ) : (\n                    productPerformance.map((item: any, index: any) => (\n                      <tr key={item.product.id} className=\"border-t\" data-testid={`performance-row-${index}`}>\n                        <td className=\"p-4 font-medium\" data-testid={`performance-product-${index}`}>\n                          {item.product.name}\n                        </td>\n                        <td className=\"p-4\" data-testid={`performance-produced-${index}`}>\n                          {item.totalProduced.toLocaleString()} pieces\n                        </td>\n                        <td className=\"p-4\" data-testid={`performance-sold-${index}`}>\n                          {item.totalSold.toLocaleString()} pieces\n                        </td>\n                        <td className=\"p-4\" data-testid={`performance-material-kg-${index}`}>\n                          {item.totalMaterialUsed.toFixed(2)} kg\n                        </td>\n                        <td className=\"p-4\" data-testid={`performance-material-type-${index}`}>\n                          <Badge variant=\"outline\">{item.materialType}</Badge>\n                        </td>\n                      </tr>\n                    ))\n                  )}\n                </tbody>\n              </table>\n            </div>\n          </div>\n\n          {/* Material Consumption Summary */}\n          <div>\n            <h3 className=\"text-lg font-semibold mb-4\">Material Consumption</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n              {Object.keys(materialConsumption).length === 0 ? (\n                <div className=\"col-span-full text-center text-muted-foreground py-8\" data-testid=\"no-material-data\">\n                  No material consumption data for the selected date range.\n                </div>\n              ) : (\n                Object.entries(materialConsumption).map(([material, data]) => (\n                  <Card key={material} data-testid={`material-consumption-${material}`}>\n                    <CardContent className=\"p-4\">\n                      <h4 className=\"font-medium mb-2\" data-testid={`material-consumption-name-${material}`}>\n                        {material}\n                      </h4>\n                      <div className=\"space-y-1 text-sm\">\n                        <div className=\"flex justify-between\">\n                          <span>Consumed:</span>\n                          <span className=\"font-medium\" data-testid={`material-consumption-kg-${material}`}>\n                            {(data as any).totalKg.toFixed(2)} kg\n                          </span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Total Cost:</span>\n                          <span className=\"font-bold\" data-testid={`material-consumption-cost-${material}`}>\n                            ₹{(data as any).totalCost.toFixed(2)}\n                          </span>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))\n              )}\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":10708},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/pages/dashboard.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport KPICards from \"@/components/kpi-cards\";\nimport { api } from \"@/lib/api\";\nimport { format } from \"date-fns\";\n\nexport default function Dashboard() {\n  const { data: metrics, isLoading, error } = useQuery({\n    queryKey: [\"/api/dashboard/metrics\"],\n    queryFn: api.getDashboardMetrics,\n  });\n\n  const { data: recentProduction } = useQuery({\n    queryKey: [\"/api/production\"],\n    queryFn: api.getProduction,\n  });\n\n  const { data: inventory } = useQuery({\n    queryKey: [\"/api/inventory\"],\n    queryFn: api.getInventory,\n  });\n\n  const { data: salesOrders } = useQuery({\n    queryKey: [\"/api/sales\"],\n    queryFn: api.getSalesOrders,\n  });\n\n  const lowStockItems = inventory?.filter((item: any) => item.currentStock < 50) || [];\n  const pendingOrders = salesOrders?.filter((order: any) => order.status === \"pending\") || [];\n  const recentProductionRecords = recentProduction?.slice(0, 3) || [];\n\n  if (isLoading) {\n    return <div data-testid=\"loading-dashboard\">Loading dashboard...</div>;\n  }\n\n  if (error || !metrics) {\n    return (\n      <div className=\"p-8 text-center\" data-testid=\"error-dashboard\">\n        <p className=\"text-destructive\">Failed to load dashboard metrics. Please try again.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div data-testid=\"dashboard-page\">\n      <KPICards metrics={metrics} />\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8\">\n        {/* Recent Production Records */}\n        <Card className=\"lg:col-span-2\" data-testid=\"recent-production-card\">\n          <CardHeader className=\"border-b border-border\">\n            <div className=\"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between\">\n              <CardTitle>Recent Production Records</CardTitle>\n              <Button data-testid=\"button-add-production\" className=\"flex-shrink-0\">Add Record</Button>\n            </div>\n          </CardHeader>\n          <CardContent className=\"p-6\">\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full data-table\" data-testid=\"table-recent-production\">\n                <thead>\n                  <tr className=\"border-b border-border\">\n                    <th className=\"text-left py-3 text-sm font-medium text-muted-foreground\">Date</th>\n                    <th className=\"text-left py-3 text-sm font-medium text-muted-foreground\">Product</th>\n                    <th className=\"text-left py-3 text-sm font-medium text-muted-foreground\">Quantity (KG)</th>\n                    <th className=\"text-left py-3 text-sm font-medium text-muted-foreground\">Pieces</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {recentProductionRecords.length === 0 ? (\n                    <tr>\n                      <td colSpan={4} className=\"py-8 text-center text-muted-foreground\" data-testid=\"no-production-records\">\n                        No production records found. Start by adding your first production record.\n                      </td>\n                    </tr>\n                  ) : (\n                    recentProductionRecords.map((record: any) => (\n                      <tr key={record.id} data-testid={`production-row-${record.id}`}>\n                        <td className=\"py-3 text-sm\" data-testid={`production-date-${record.id}`}>\n                          {format(new Date(record.date), \"MMM dd, yyyy\")}\n                        </td>\n                        <td className=\"py-3 text-sm font-medium\" data-testid={`production-product-${record.id}`}>\n                          {record.product.name}\n                        </td>\n                        <td className=\"py-3 text-sm\" data-testid={`production-quantity-${record.id}`}>\n                          {record.quantityKg}\n                        </td>\n                        <td className=\"py-3 text-sm\" data-testid={`production-pieces-${record.id}`}>\n                          {record.pieces}\n                        </td>\n                      </tr>\n                    ))\n                  )}\n                </tbody>\n              </table>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Inventory Alerts */}\n        <Card data-testid=\"inventory-alerts-card\">\n          <CardHeader className=\"border-b border-border\">\n            <CardTitle>Inventory Alerts</CardTitle>\n          </CardHeader>\n          <CardContent className=\"p-6 space-y-4 max-h-96 overflow-y-auto\">\n            {lowStockItems.length === 0 ? (\n              <div className=\"text-center text-muted-foreground py-4\" data-testid=\"no-inventory-alerts\">\n                All products have sufficient stock levels.\n              </div>\n            ) : (\n              lowStockItems.map((item: any) => {\n                const severity = item.currentStock < 20 ? \"critical\" : item.currentStock < 50 ? \"low\" : \"medium\";\n                return (\n                  <div \n                    key={item.id} \n                    className={`flex items-center justify-between p-3 rounded-lg border ${\n                      severity === \"critical\" \n                        ? \"bg-red-50 border-red-200\" \n                        : severity === \"low\"\n                        ? \"bg-amber-50 border-amber-200\"\n                        : \"bg-yellow-50 border-yellow-200\"\n                    }`}\n                    data-testid={`inventory-alert-${item.id}`}\n                  >\n                    <div>\n                      <p className=\"font-medium text-sm\" data-testid={`alert-product-${item.id}`}>\n                        {item.name}\n                      </p>\n                      <p className=\"text-xs text-muted-foreground\" data-testid={`alert-stock-${item.id}`}>\n                        {item.currentStock} pieces remaining\n                      </p>\n                    </div>\n                    <Badge \n                      variant={severity === \"critical\" ? \"destructive\" : \"secondary\"}\n                      data-testid={`alert-severity-${item.id}`}\n                    >\n                      {severity === \"critical\" ? \"Critical\" : severity === \"low\" ? \"Low\" : \"Medium\"}\n                    </Badge>\n                  </div>\n                );\n              })\n            )}\n          </CardContent>\n        </Card>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Pending Sales Orders */}\n        <Card data-testid=\"pending-orders-card\">\n          <CardHeader className=\"border-b border-border\">\n            <div className=\"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between\">\n              <CardTitle>Pending Sales Orders</CardTitle>\n              <Button data-testid=\"button-new-order\" className=\"flex-shrink-0\">New Order</Button>\n            </div>\n          </CardHeader>\n          <CardContent className=\"p-6\">\n            <div className=\"space-y-4 max-h-96 overflow-y-auto\">\n              {pendingOrders.length === 0 ? (\n                <div className=\"text-center text-muted-foreground py-4\" data-testid=\"no-pending-orders\">\n                  No pending orders. All orders are up to date.\n                </div>\n              ) : (\n                pendingOrders.map((order: any) => (\n                  <div \n                    key={order.id} \n                    className=\"flex items-center justify-between p-4 border border-border rounded-lg\"\n                    data-testid={`pending-order-${order.id}`}\n                  >\n                    <div>\n                      <p className=\"font-medium\" data-testid={`order-number-${order.id}`}>\n                        {order.orderNumber}\n                      </p>\n                      <p className=\"text-sm text-muted-foreground\" data-testid={`order-party-${order.id}`}>\n                        {order.party.name}\n                      </p>\n                      <p className=\"text-xs text-muted-foreground\" data-testid={`order-date-${order.id}`}>\n                        {format(new Date(order.date), \"MMM dd, yyyy\")}\n                      </p>\n                    </div>\n                    <div className=\"text-right\">\n                      <Badge variant=\"secondary\" data-testid={`order-status-${order.id}`}>\n                        {order.status}\n                      </Badge>\n                      <p className=\"text-sm font-medium mt-1\" data-testid={`order-items-${order.id}`}>\n                        {order.itemCount} items\n                      </p>\n                    </div>\n                  </div>\n                ))\n              )}\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Production Planning */}\n        <Card data-testid=\"production-planning-card\">\n          <CardHeader className=\"border-b border-border\">\n            <div className=\"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between\">\n              <CardTitle>Production Planning</CardTitle>\n              <Button data-testid=\"button-plan-production\" className=\"flex-shrink-0\">Plan Production</Button>\n            </div>\n          </CardHeader>\n          <CardContent className=\"p-6\">\n            <div className=\"space-y-4\">\n              <div className=\"p-4 bg-muted rounded-lg\" data-testid=\"material-requirements\">\n                <h4 className=\"font-medium mb-2\">Material Requirements</h4>\n                <div className=\"space-y-2 text-sm text-muted-foreground\">\n                  <p>Access the Planning module to calculate material requirements for production runs.</p>\n                </div>\n              </div>\n              <div className=\"p-4 border border-border rounded-lg\" data-testid=\"todays-plan\">\n                <h4 className=\"font-medium mb-2\">Today's Plan</h4>\n                <div className=\"space-y-2 text-sm text-muted-foreground\">\n                  <p>Set up production plans to track daily manufacturing goals.</p>\n                </div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","size_bytes":10124},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1419},"client/src/components/ui/loading-spinner.tsx":{"content":"import { Loader2 } from \"lucide-react\";\n\ninterface LoadingSpinnerProps {\n  className?: string;\n  size?: \"sm\" | \"md\" | \"lg\";\n}\n\nexport function LoadingSpinner({ className = \"\", size = \"md\" }: LoadingSpinnerProps) {\n  const sizeClasses = {\n    sm: \"h-4 w-4\",\n    md: \"h-6 w-6\", \n    lg: \"h-8 w-8\"\n  };\n\n  return (\n    <Loader2 \n      className={`animate-spin ${sizeClasses[size]} ${className}`}\n      data-testid=\"loading-spinner\"\n    />\n  );\n}","size_bytes":442},"client/src/pages/inventory.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Plus } from \"lucide-react\";\nimport InventoryTable from \"@/components/tables/inventory-table\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { api } from \"@/lib/api\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nconst stockAdjustmentSchema = z.object({\n  productId: z.number().min(1, \"Product is required\"),\n  quantity: z.number().int(\"Quantity must be a whole number\"),\n  reason: z.string().min(1, \"Reason is required\"),\n  date: z.string().min(1, \"Date is required\"),\n});\n\ntype StockAdjustmentData = z.infer<typeof stockAdjustmentSchema>;\n\nexport default function Inventory() {\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const { toast } = useToast();\n\n  const { data: inventory, isLoading } = useQuery({\n    queryKey: [\"/api/inventory\"],\n    queryFn: api.getInventory,\n  });\n\n  const { data: products } = useQuery({\n    queryKey: [\"/api/products\"],\n    queryFn: api.getProducts,\n  });\n\n  const createAdjustmentMutation = useMutation({\n    mutationFn: api.createStockAdjustment,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/inventory\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/stock-adjustments\"] });\n      setIsDialogOpen(false);\n      toast({\n        title: \"Success\",\n        description: \"Stock adjustment created successfully\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to create stock adjustment\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const form = useForm<StockAdjustmentData>({\n    resolver: zodResolver(stockAdjustmentSchema),\n    defaultValues: {\n      productId: 0,\n      quantity: 0,\n      reason: \"\",\n      date: new Date().toISOString().split('T')[0],\n    },\n  });\n\n  const handleCreateAdjustment = (data: StockAdjustmentData) => {\n    createAdjustmentMutation.mutate(data);\n  };\n\n  if (isLoading) {\n    return <div data-testid=\"loading-inventory\">Loading inventory...</div>;\n  }\n\n  return (\n    <div data-testid=\"inventory-page\">\n      <Card>\n        <CardHeader>\n          <div className=\"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between\">\n            <div className=\"min-w-0\">\n              <CardTitle data-testid=\"inventory-title\">Inventory Control</CardTitle>\n              <p className=\"text-muted-foreground text-sm mt-1 hidden sm:block\" data-testid=\"inventory-description\">\n                Real-time view of stock levels with production and sales tracking\n              </p>\n            </div>\n            <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\n              <DialogTrigger asChild>\n                <Button data-testid=\"button-stock-adjustment\" className=\"flex-shrink-0\">\n                  <Plus className=\"w-4 h-4 mr-2\" />\n                  Stock Adjustment\n                </Button>\n              </DialogTrigger>\n              <DialogContent data-testid=\"stock-adjustment-dialog\">\n                <DialogHeader>\n                  <DialogTitle>Stock Adjustment</DialogTitle>\n                </DialogHeader>\n                <Form {...form}>\n                  <form onSubmit={form.handleSubmit(handleCreateAdjustment)} className=\"space-y-4\">\n                    <FormField\n                      control={form.control}\n                      name=\"productId\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Product</FormLabel>\n                          <Select onValueChange={(value) => field.onChange(parseInt(value))} value={field.value?.toString()}>\n                            <FormControl>\n                              <SelectTrigger data-testid=\"select-product\">\n                                <SelectValue placeholder=\"Select a product\" />\n                              </SelectTrigger>\n                            </FormControl>\n                            <SelectContent>\n                              {products?.map((product: any) => (\n                                <SelectItem key={product.id} value={product.id.toString()}>\n                                  {product.name}\n                                </SelectItem>\n                              ))}\n                            </SelectContent>\n                          </Select>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"quantity\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Quantity (+ for increase, - for decrease)</FormLabel>\n                          <FormControl>\n                            <Input\n                              type=\"number\"\n                              placeholder=\"e.g., +50 or -25\"\n                              {...field}\n                              onChange={(e) => field.onChange(parseInt(e.target.value) || 0)}\n                              data-testid=\"input-quantity\"\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"reason\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Reason</FormLabel>\n                          <FormControl>\n                            <Textarea\n                              placeholder=\"e.g., Physical count correction, Damaged goods, etc.\"\n                              {...field}\n                              data-testid=\"textarea-reason\"\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"date\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Date</FormLabel>\n                          <FormControl>\n                            <Input type=\"date\" {...field} data-testid=\"input-date\" />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <div className=\"flex space-x-3 pt-4\">\n                      <Button\n                        type=\"button\"\n                        variant=\"outline\"\n                        className=\"flex-1\"\n                        onClick={() => setIsDialogOpen(false)}\n                        data-testid=\"button-cancel\"\n                      >\n                        Cancel\n                      </Button>\n                      <Button\n                        type=\"submit\"\n                        className=\"flex-1\"\n                        disabled={createAdjustmentMutation.isPending}\n                        data-testid=\"button-save-adjustment\"\n                      >\n                        {createAdjustmentMutation.isPending ? \"Saving...\" : \"Save Adjustment\"}\n                      </Button>\n                    </div>\n                  </form>\n                </Form>\n              </DialogContent>\n            </Dialog>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <InventoryTable inventory={inventory || []} />\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":8376},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nconst app = express();\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":2066},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\n// Helper to get CSRF token - fetch fresh if not available\nasync function getCSRFToken(): Promise<string | undefined> {\n  // First try to get from cache\n  let data = queryClient.getQueryData(['/api/csrf-token']) as { csrfToken: string } | undefined;\n  \n  // If not in cache or stale, fetch fresh\n  if (!data?.csrfToken) {\n    try {\n      const response = await fetch('/api/csrf-token', { credentials: 'include' });\n      if (response.ok) {\n        data = await response.json();\n        // Update the cache with fresh token\n        queryClient.setQueryData(['/api/csrf-token'], data);\n      }\n    } catch (error) {\n      console.error('Failed to fetch CSRF token:', error);\n      return undefined;\n    }\n  }\n  \n  return data?.csrfToken;\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const headers: Record<string, string> = {};\n  \n  if (data) {\n    headers[\"Content-Type\"] = \"application/json\";\n  }\n  \n  // Add CSRF token for unsafe methods\n  const unsafeMethods = ['POST', 'PUT', 'DELETE', 'PATCH'];\n  if (unsafeMethods.includes(method.toUpperCase())) {\n    const csrfToken = await getCSRFToken();\n    if (csrfToken) {\n      headers['X-CSRF-Token'] = csrfToken;\n    }\n  }\n\n  const res = await fetch(url, {\n    method,\n    headers,\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":2462},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/auth/protected-route.tsx":{"content":"import { useAuth } from \"@/hooks/use-auth\";\nimport { Loader2 } from \"lucide-react\";\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n  fallback?: React.ReactNode;\n}\n\nexport function ProtectedRoute({ children, fallback }: ProtectedRouteProps) {\n  const { isAuthenticated, isLoading } = useAuth();\n\n  // Show loading spinner while checking authentication\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\n      </div>\n    );\n  }\n\n  // If not authenticated, show fallback (login page) or redirect to login\n  if (!isAuthenticated) {\n    if (fallback) {\n      return <>{fallback}</>;\n    }\n    \n    // Redirect to login if no fallback provided\n    window.location.href = '/api/login';\n    return null;\n  }\n\n  // User is authenticated, render children\n  return <>{children}</>;\n}","size_bytes":891},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":1901},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/pages/production.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from \"@/components/ui/alert-dialog\";\nimport { Plus } from \"lucide-react\";\nimport ProductionForm from \"@/components/forms/production-form\";\nimport ProductionTable from \"@/components/tables/production-table\";\nimport { api } from \"@/lib/api\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { ProductionWithProduct } from \"@shared/schema\";\n\nexport default function Production() {\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [isEditDialogOpen, setIsEditDialogOpen] = useState(false);\n  const [isDeleteDialogOpen, setIsDeleteDialogOpen] = useState(false);\n  const [selectedRecord, setSelectedRecord] = useState<ProductionWithProduct | null>(null);\n  const { toast } = useToast();\n\n  const { data: production, isLoading } = useQuery({\n    queryKey: [\"/api/production\"],\n    queryFn: api.getProduction,\n  });\n\n  const { data: products } = useQuery({\n    queryKey: [\"/api/products\"],\n    queryFn: api.getProducts,\n  });\n\n  const createProductionMutation = useMutation({\n    mutationFn: api.createProduction,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/production\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/inventory\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/metrics\"] });\n      setIsDialogOpen(false);\n      toast({\n        title: \"Success\",\n        description: \"Production record created successfully\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to create production record\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateProductionMutation = useMutation({\n    mutationFn: ({ id, data }: { id: number; data: any }) => api.updateProduction(id, data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/production\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/inventory\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/metrics\"] });\n      setIsEditDialogOpen(false);\n      setSelectedRecord(null);\n      toast({\n        title: \"Success\",\n        description: \"Production record updated successfully\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to update production record\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteProductionMutation = useMutation({\n    mutationFn: api.deleteProduction,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/production\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/inventory\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/metrics\"] });\n      setIsDeleteDialogOpen(false);\n      setSelectedRecord(null);\n      toast({\n        title: \"Success\",\n        description: \"Production record deleted successfully\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to delete production record\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleCreateProduction = (data: any) => {\n    createProductionMutation.mutate(data);\n  };\n\n  const handleEditProduction = (record: ProductionWithProduct) => {\n    setSelectedRecord(record);\n    setIsEditDialogOpen(true);\n  };\n\n  const handleUpdateProduction = (data: any) => {\n    if (selectedRecord) {\n      updateProductionMutation.mutate({ id: selectedRecord.id, data });\n    }\n  };\n\n  const handleDeleteProduction = (record: ProductionWithProduct) => {\n    setSelectedRecord(record);\n    setIsDeleteDialogOpen(true);\n  };\n\n  const handleConfirmDelete = () => {\n    if (selectedRecord) {\n      deleteProductionMutation.mutate(selectedRecord.id);\n    }\n  };\n\n  if (isLoading) {\n    return <div data-testid=\"loading-production\">Loading production records...</div>;\n  }\n\n  return (\n    <div data-testid=\"production-page\">\n      <Card>\n        <CardHeader>\n          <div className=\"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between\">\n            <div className=\"min-w-0\">\n              <CardTitle data-testid=\"production-title\">Production Records</CardTitle>\n              <p className=\"text-muted-foreground text-sm mt-1 hidden sm:block\" data-testid=\"production-description\">\n                Log daily manufacturing output and track production efficiency\n              </p>\n            </div>\n            <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\n              <DialogTrigger asChild>\n                <Button data-testid=\"button-add-production\" className=\"flex-shrink-0\">\n                  <Plus className=\"w-4 h-4 mr-2\" />\n                  Add Record\n                </Button>\n              </DialogTrigger>\n              <DialogContent data-testid=\"add-production-dialog\">\n                <DialogHeader>\n                  <DialogTitle>Add Production Record</DialogTitle>\n                </DialogHeader>\n                <ProductionForm\n                  products={products || []}\n                  onSubmit={handleCreateProduction}\n                  isLoading={createProductionMutation.isPending}\n                />\n              </DialogContent>\n            </Dialog>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <ProductionTable \n            production={production || []} \n            onEdit={handleEditProduction}\n            onDelete={handleDeleteProduction}\n          />\n        </CardContent>\n      </Card>\n\n      {/* Edit Dialog */}\n      <Dialog open={isEditDialogOpen} onOpenChange={setIsEditDialogOpen}>\n        <DialogContent data-testid=\"edit-production-dialog\">\n          <DialogHeader>\n            <DialogTitle>Edit Production Record</DialogTitle>\n          </DialogHeader>\n          {selectedRecord && (\n            <ProductionForm\n              products={products || []}\n              defaultValues={{\n                date: selectedRecord.date,\n                productId: selectedRecord.productId,\n                quantityKg: selectedRecord.quantityKg,\n              }}\n              onSubmit={handleUpdateProduction}\n              isLoading={updateProductionMutation.isPending}\n            />\n          )}\n        </DialogContent>\n      </Dialog>\n\n      {/* Delete Confirmation Dialog */}\n      <AlertDialog open={isDeleteDialogOpen} onOpenChange={setIsDeleteDialogOpen}>\n        <AlertDialogContent data-testid=\"delete-production-dialog\">\n          <AlertDialogHeader>\n            <AlertDialogTitle>Delete Production Record</AlertDialogTitle>\n            <AlertDialogDescription>\n              Are you sure you want to delete this production record for {selectedRecord?.product.name}? This action cannot be undone.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel data-testid=\"button-cancel-delete\">Cancel</AlertDialogCancel>\n            <AlertDialogAction \n              onClick={handleConfirmDelete}\n              className=\"bg-red-600 hover:bg-red-700\"\n              data-testid=\"button-confirm-delete\"\n            >\n              Delete\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  );\n}\n","size_bytes":7729},"client/src/hooks/use-auth.ts":{"content":"import { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\nexport interface User {\n  id: string;\n  email: string;\n  firstName?: string;\n  lastName?: string;\n  profileImageUrl?: string;\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport interface CSRFTokenResponse {\n  csrfToken: string;\n}\n\n// Hook to get current user\nexport function useUser() {\n  return useQuery<User>({\n    queryKey: ['/api/auth/user'],\n    retry: false,\n  });\n}\n\n// Hook to get CSRF token\nexport function useCSRFToken() {\n  return useQuery<CSRFTokenResponse>({\n    queryKey: ['/api/csrf-token'],\n    retry: false,\n  });\n}\n\n// Hook for authentication state\nexport function useAuth() {\n  const queryClient = useQueryClient();\n  const userQuery = useUser();\n  const csrfQuery = useCSRFToken();\n\n  const logout = useMutation({\n    mutationFn: async () => {\n      // Clear all cached data on logout\n      queryClient.clear();\n      // Redirect to logout endpoint\n      window.location.href = '/api/logout';\n    },\n  });\n\n  const isAuthenticated = !!userQuery.data && !userQuery.isError;\n  const isLoading = userQuery.isLoading;\n  const user = userQuery.data;\n  const csrfToken = csrfQuery.data?.csrfToken;\n\n  return {\n    user,\n    isAuthenticated,\n    isLoading,\n    csrfToken,\n    logout: logout.mutate,\n    isLoggingOut: logout.isPending,\n  };\n}","size_bytes":1383},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport multer from \"multer\";\nimport * as XLSX from \"xlsx\";\nimport { storage } from \"./storage\";\nimport { \n  insertProductSchema, insertPartySchema, insertProductionSchema, \n  insertSalesOrderSchema, insertSalesOrderItemSchema, insertStockAdjustmentSchema\n} from \"@shared/schema\";\nimport { z } from \"zod\";\nimport { setupAuth, isAuthenticated, validateCSRF } from \"./replitAuth\";\n\n// Configure multer for file uploads\nconst upload = multer({\n  storage: multer.memoryStorage(),\n  limits: {\n    fileSize: 10 * 1024 * 1024, // 10MB limit\n  },\n  fileFilter: (req, file, cb) => {\n    // Accept only Excel files\n    if (file.mimetype === 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' || \n        file.mimetype === 'application/vnd.ms-excel' ||\n        file.originalname.endsWith('.xlsx') || \n        file.originalname.endsWith('.xls')) {\n      cb(null, true);\n    } else {\n      cb(new Error('Only Excel files are allowed'));\n    }\n  }\n});\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Auth middleware - setup authentication first\n  await setupAuth(app);\n\n  // Auth routes\n  app.get('/api/auth/user', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const user = await storage.getUser(userId);\n      res.json(user);\n    } catch (error) {\n      console.error(\"Error fetching user:\", error);\n      res.status(500).json({ message: \"Failed to fetch user\" });\n    }\n  });\n  \n  // Products\n  app.get(\"/api/products\", isAuthenticated, async (_req, res) => {\n    try {\n      const products = await storage.getProducts();\n      res.json(products);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch products\" });\n    }\n  });\n\n  app.get(\"/api/products/:id\", isAuthenticated, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const product = await storage.getProduct(id);\n      if (!product) {\n        return res.status(404).json({ message: \"Product not found\" });\n      }\n      res.json(product);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch product\" });\n    }\n  });\n\n  app.post(\"/api/products\", isAuthenticated, validateCSRF, async (req, res) => {\n    try {\n      const validatedData = insertProductSchema.parse(req.body);\n      const product = await storage.createProduct(validatedData);\n      res.status(201).json(product);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid product data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create product\" });\n    }\n  });\n\n  app.put(\"/api/products/:id\", isAuthenticated, validateCSRF, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const validatedData = insertProductSchema.partial().parse(req.body);\n      const product = await storage.updateProduct(id, validatedData);\n      res.json(product);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid product data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to update product\" });\n    }\n  });\n\n  app.delete(\"/api/products/:id\", isAuthenticated, validateCSRF, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      await storage.deleteProduct(id);\n      res.status(204).send();\n    } catch (error) {\n      if (error instanceof Error) {\n        return res.status(400).json({ message: error.message });\n      }\n      res.status(500).json({ message: \"Failed to delete product\" });\n    }\n  });\n\n  // Parties\n  app.get(\"/api/parties\", isAuthenticated, async (_req, res) => {\n    try {\n      const parties = await storage.getParties();\n      res.json(parties);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch parties\" });\n    }\n  });\n\n  app.post(\"/api/parties\", isAuthenticated, validateCSRF, async (req, res) => {\n    try {\n      const validatedData = insertPartySchema.parse(req.body);\n      const party = await storage.createParty(validatedData);\n      res.status(201).json(party);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid party data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create party\" });\n    }\n  });\n\n  app.put(\"/api/parties/:id\", isAuthenticated, validateCSRF, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const validatedData = insertPartySchema.partial().parse(req.body);\n      const party = await storage.updateParty(id, validatedData);\n      res.json(party);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid party data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to update party\" });\n    }\n  });\n\n  app.delete(\"/api/parties/:id\", isAuthenticated, validateCSRF, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      await storage.deleteParty(id);\n      res.status(204).send();\n    } catch (error) {\n      if (error instanceof Error) {\n        return res.status(400).json({ message: error.message });\n      }\n      res.status(500).json({ message: \"Failed to delete party\" });\n    }\n  });\n\n  // Bulk upload endpoints\n  app.post(\"/api/products/bulk\", isAuthenticated, validateCSRF, upload.single('excel'), async (req, res) => {\n    try {\n      if (!req.file) {\n        return res.status(400).json({ message: \"No Excel file uploaded\" });\n      }\n\n      // Parse Excel file\n      const workbook = XLSX.read(req.file.buffer, { type: 'buffer' });\n      const sheetName = workbook.SheetNames[0];\n      const worksheet = workbook.Sheets[sheetName];\n      const data = XLSX.utils.sheet_to_json(worksheet);\n\n      const results = {\n        success: 0,\n        failed: 0,\n        errors: [] as any[]\n      };\n\n      // Process each row\n      for (let index = 0; index < data.length; index++) {\n        const row = data[index] as any;\n        try {\n          // Map Excel columns to our schema\n          const productData = {\n            name: String(row['Product Name'] || row['name'] || ''),\n            weightGrams: String(row['Weight (grams)'] || row['weightGrams'] || '0'),\n            rawMaterialType: String(row['Material Type'] || row['rawMaterialType'] || 'Steel'),\n            rawMaterialPricePerKg: String(row['Material Price/KG'] || row['rawMaterialPricePerKg'] || '0')\n          };\n\n          // Validate data\n          const validatedData = insertProductSchema.parse(productData);\n          await storage.createProduct(validatedData);\n          results.success++;\n        } catch (error) {\n          results.failed++;\n          results.errors.push({\n            row: index + 2, // Excel row number (starting from 2 due to header)\n            data: row,\n            error: error instanceof z.ZodError ? error.errors : (error as Error).message\n          });\n        }\n      }\n\n      res.json({\n        message: `Bulk upload completed. ${results.success} products added, ${results.failed} failed.`,\n        results\n      });\n    } catch (error) {\n      console.error(\"Bulk upload error:\", error);\n      res.status(500).json({ message: \"Failed to process bulk upload\" });\n    }\n  });\n\n  app.post(\"/api/parties/bulk\", isAuthenticated, validateCSRF, upload.single('excel'), async (req, res) => {\n    try {\n      if (!req.file) {\n        return res.status(400).json({ message: \"No Excel file uploaded\" });\n      }\n\n      // Parse Excel file\n      const workbook = XLSX.read(req.file.buffer, { type: 'buffer' });\n      const sheetName = workbook.SheetNames[0];\n      const worksheet = workbook.Sheets[sheetName];\n      const data = XLSX.utils.sheet_to_json(worksheet);\n\n      const results = {\n        success: 0,\n        failed: 0,\n        errors: [] as any[]\n      };\n\n      // Process each row\n      for (let index = 0; index < data.length; index++) {\n        const row = data[index] as any;\n        try {\n          // Map Excel columns to our schema\n          const partyData = {\n            name: String(row['Party Name'] || row['name'] || ''),\n            address: String(row['Address'] || row['address'] || ''),\n            pinCode: String(row['Pin Code'] || row['pinCode'] || ''),\n            phoneNumber: String(row['Phone Number'] || row['phoneNumber'] || ''),\n            gstNumber: row['GST Number'] || row['gstNumber'] || null\n          };\n\n          // Validate data\n          const validatedData = insertPartySchema.parse(partyData);\n          await storage.createParty(validatedData);\n          results.success++;\n        } catch (error) {\n          results.failed++;\n          results.errors.push({\n            row: index + 2, // Excel row number (starting from 2 due to header)\n            data: row,\n            error: error instanceof z.ZodError ? error.errors : (error as Error).message\n          });\n        }\n      }\n\n      res.json({\n        message: `Bulk upload completed. ${results.success} parties added, ${results.failed} failed.`,\n        results\n      });\n    } catch (error) {\n      console.error(\"Bulk upload error:\", error);\n      res.status(500).json({ message: \"Failed to process bulk upload\" });\n    }\n  });\n\n  // Production\n  app.get(\"/api/production\", isAuthenticated, async (_req, res) => {\n    try {\n      const production = await storage.getProduction();\n      res.json(production);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch production records\" });\n    }\n  });\n\n  app.post(\"/api/production\", isAuthenticated, validateCSRF, async (req, res) => {\n    try {\n      const validatedData = insertProductionSchema.parse(req.body);\n      const production = await storage.createProductionRecord(validatedData);\n      res.status(201).json(production);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid production data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create production record\" });\n    }\n  });\n\n  app.put(\"/api/production/:id\", isAuthenticated, validateCSRF, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const validatedData = insertProductionSchema.partial().parse(req.body);\n      const production = await storage.updateProductionRecord(id, validatedData);\n      res.json(production);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid production data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to update production record\" });\n    }\n  });\n\n  app.delete(\"/api/production/:id\", isAuthenticated, validateCSRF, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      await storage.deleteProductionRecord(id);\n      res.status(204).send();\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to delete production record\" });\n    }\n  });\n\n  // Sales Orders\n  app.get(\"/api/sales\", isAuthenticated, async (_req, res) => {\n    try {\n      const salesOrders = await storage.getSalesOrders();\n      res.json(salesOrders);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch sales orders\" });\n    }\n  });\n\n  app.get(\"/api/sales/:id\", isAuthenticated, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const salesOrder = await storage.getSalesOrder(id);\n      if (!salesOrder) {\n        return res.status(404).json({ message: \"Sales order not found\" });\n      }\n      res.json(salesOrder);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch sales order\" });\n    }\n  });\n\n  app.post(\"/api/sales\", isAuthenticated, validateCSRF, async (req, res) => {\n    try {\n      const { order, items } = req.body;\n      const validatedOrder = insertSalesOrderSchema.parse(order);\n      const validatedItems = z.array(insertSalesOrderItemSchema).parse(items);\n      \n      const salesOrder = await storage.createSalesOrder(validatedOrder, validatedItems);\n      res.status(201).json(salesOrder);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid sales order data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create sales order\" });\n    }\n  });\n\n  app.post(\"/api/sales/:id/fulfill\", isAuthenticated, validateCSRF, async (req, res) => {\n    try {\n      const orderId = parseInt(req.params.id);\n      const { fulfillments } = req.body;\n      \n      await storage.fulfillSalesOrderItems(orderId, fulfillments);\n      res.json({ message: \"Order fulfilled successfully\" });\n    } catch (error) {\n      if (error instanceof Error) {\n        return res.status(400).json({ message: error.message });\n      }\n      res.status(500).json({ message: \"Failed to fulfill order\" });\n    }\n  });\n\n  app.delete(\"/api/sales/:id\", isAuthenticated, validateCSRF, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      await storage.deleteSalesOrder(id);\n      res.status(204).send();\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to delete sales order\" });\n    }\n  });\n\n  app.put(\"/api/sales/:id/cancel\", isAuthenticated, validateCSRF, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const salesOrder = await storage.cancelInvoice(id);\n      res.json(salesOrder);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to cancel invoice\" });\n    }\n  });\n\n  // Stock Adjustments\n  app.get(\"/api/stock-adjustments\", isAuthenticated, async (_req, res) => {\n    try {\n      const adjustments = await storage.getStockAdjustments();\n      res.json(adjustments);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch stock adjustments\" });\n    }\n  });\n\n  app.post(\"/api/stock-adjustments\", isAuthenticated, validateCSRF, async (req, res) => {\n    try {\n      const validatedData = insertStockAdjustmentSchema.parse(req.body);\n      const adjustment = await storage.createStockAdjustment(validatedData);\n      res.status(201).json(adjustment);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({ message: \"Invalid stock adjustment data\", errors: error.errors });\n      }\n      res.status(500).json({ message: \"Failed to create stock adjustment\" });\n    }\n  });\n\n  // Inventory\n  app.get(\"/api/inventory\", isAuthenticated, async (_req, res) => {\n    try {\n      const inventory = await storage.getInventory();\n      res.json(inventory);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch inventory\" });\n    }\n  });\n\n  // Dashboard\n  app.get(\"/api/dashboard/metrics\", isAuthenticated, async (_req, res) => {\n    try {\n      const metrics = await storage.getDashboardMetrics();\n      res.json(metrics);\n    } catch (error) {\n      console.error(\"Dashboard metrics error:\", error);\n      res.status(500).json({ message: \"Failed to fetch dashboard metrics\" });\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}\n","size_bytes":15265},"client/src/components/tables/parties-table.tsx":{"content":"import { Badge } from \"@/components/ui/badge\";\nimport { Edit, Phone, MapPin, Trash2 } from \"lucide-react\";\nimport ResponsiveDataTable from \"@/components/ui/responsive-data-table\";\nimport type { Party } from \"@shared/schema\";\n\ninterface PartiesTableProps {\n  parties: Party[];\n  onEdit: (party: Party) => void;\n  onDelete: (party: Party) => void;\n}\n\nexport default function PartiesTable({ parties, onEdit, onDelete }: PartiesTableProps) {\n  const columns = [\n    {\n      key: 'name' as keyof Party,\n      label: 'Party Name',\n      className: 'font-medium',\n    },\n    {\n      key: 'phoneNumber' as keyof Party,\n      label: 'Contact',\n      render: (value: string) => (\n        <div className=\"flex items-center space-x-1\">\n          <Phone className=\"w-3 h-3 text-muted-foreground\" />\n          <span>{value}</span>\n        </div>\n      ),\n    },\n    {\n      key: 'address' as keyof Party,\n      label: 'Location',\n      render: (value: string, party: Party) => (\n        <div className=\"flex items-center space-x-1\">\n          <MapPin className=\"w-3 h-3 text-muted-foreground\" />\n          <span className=\"truncate max-w-xs\">{value}, {party.pinCode}</span>\n        </div>\n      ),\n    },\n    {\n      key: 'gstNumber' as keyof Party,\n      label: 'GST Number',\n      render: (value: string | null) => \n        value ? (\n          <Badge variant=\"secondary\">{value}</Badge>\n        ) : (\n          <span className=\"text-muted-foreground\">N/A</span>\n        ),\n    },\n  ];\n\n  const actions = [\n    {\n      label: 'Edit',\n      icon: <Edit className=\"w-4 h-4\" />,\n      onClick: (party: Party) => onEdit(party),\n      variant: 'ghost' as const,\n      testId: (party: Party) => `button-edit-party-${party.id}`,\n    },\n    {\n      label: 'Delete',\n      icon: <Trash2 className=\"w-4 h-4\" />,\n      onClick: (party: Party) => onDelete(party),\n      variant: 'ghost' as const,\n      testId: (party: Party) => `button-delete-party-${party.id}`,\n    },\n  ];\n\n  return (\n    <ResponsiveDataTable\n      data={parties}\n      columns={columns}\n      actions={actions}\n      emptyMessage=\"No parties found. Add your first customer or supplier to get started.\"\n      testId=\"parties-table\"\n      getRowTestId={(party) => `party-row-${party.id}`}\n    />\n  );\n}","size_bytes":2246},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/responsive-data-table.tsx":{"content":"import { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\n\ninterface Column<T> {\n  key: keyof T;\n  label: string;\n  render?: (value: any, item: T) => React.ReactNode;\n  className?: string;\n}\n\ninterface Action<T> {\n  label: string;\n  icon: React.ReactNode;\n  onClick: (item: T) => void;\n  disabled?: boolean;\n  variant?: \"default\" | \"destructive\" | \"outline\" | \"secondary\" | \"ghost\" | \"link\";\n  testId?: (item: T) => string;\n}\n\ninterface ResponsiveDataTableProps<T> {\n  data: T[];\n  columns: Column<T>[];\n  actions?: Action<T>[] | ((item: T) => Action<T>[]);\n  emptyMessage?: string;\n  testId?: string;\n  getRowTestId?: (item: T) => string;\n  getCardTestId?: (item: T) => string;\n}\n\nexport default function ResponsiveDataTable<T extends { id: number | string }>({\n  data,\n  columns,\n  actions = [],\n  emptyMessage = \"No data found.\",\n  testId = \"data-table\",\n  getRowTestId,\n  getCardTestId\n}: ResponsiveDataTableProps<T>) {\n  \n  const getActionsForItem = (item: T): Action<T>[] => {\n    if (typeof actions === 'function') {\n      return actions(item);\n    }\n    return actions;\n  };\n  if (data.length === 0) {\n    return (\n      <div className=\"text-center py-8 text-muted-foreground\" data-testid={`no-${testId}`}>\n        {emptyMessage}\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {/* Desktop Table View */}\n      <div className=\"hidden md:block\">\n        <div className=\"overflow-x-auto\">\n        <table className=\"w-full data-table\" data-testid={testId}>\n          <thead>\n            <tr className=\"border-b border-border\">\n              {columns.map((column) => (\n                <th \n                  key={String(column.key)} \n                  className={`text-left py-3 text-sm font-medium text-muted-foreground ${column.className || ''}`}\n                >\n                  {column.label}\n                </th>\n              ))}\n              {(Array.isArray(actions) ? actions.length > 0 : data.some(item => getActionsForItem(item).length > 0)) && (\n                <th className=\"text-left py-3 text-sm font-medium text-muted-foreground\">Actions</th>\n              )}\n            </tr>\n          </thead>\n          <tbody>\n            {data.map((item) => (\n              <tr \n                key={String(item.id)} \n                className=\"border-b border-border hover:bg-muted\" \n                data-testid={getRowTestId ? getRowTestId(item) : `${testId}-table-row-${item.id}`}\n              >\n                {columns.map((column) => (\n                  <td \n                    key={String(column.key)} \n                    className={`py-3 text-sm ${column.className || ''}`}\n                    data-testid={`${testId}-table-${String(column.key)}-${item.id}`}\n                  >\n                    {column.render \n                      ? column.render(item[column.key], item)\n                      : String(item[column.key] ?? '')\n                    }\n                  </td>\n                ))}\n                {getActionsForItem(item).length > 0 && (\n                  <td className=\"py-3 text-sm\">\n                    <div className=\"flex items-center space-x-2\">\n                      {getActionsForItem(item).map((action, actionIndex) => (\n                        <Button\n                          key={actionIndex}\n                          variant={action.variant || \"ghost\"}\n                          size=\"sm\"\n                          onClick={() => action.onClick(item)}\n                          disabled={action.disabled}\n                          data-testid={action.testId ? action.testId(item) : `${testId}-table-action-${actionIndex}-${item.id}`}\n                        >\n                          {action.icon}\n                        </Button>\n                      ))}\n                    </div>\n                  </td>\n                )}\n              </tr>\n            ))}\n          </tbody>\n        </table>\n        </div>\n      </div>\n\n      {/* Mobile Card View */}\n      <div className=\"md:hidden space-y-4\">\n        {data.map((item) => (\n          <Card \n            key={String(item.id)} \n            className=\"shadow-sm\"\n            data-testid={getCardTestId ? getCardTestId(item) : getRowTestId ? `${getRowTestId(item)}-card` : `${testId}-card-${item.id}`}\n          >\n            <CardContent className=\"p-4\">\n              <div className=\"space-y-3\">\n                {columns.map((column) => (\n                  <div key={String(column.key)} className=\"flex justify-between items-start\">\n                    <span className=\"text-sm font-medium text-muted-foreground min-w-0 flex-1\">\n                      {column.label}\n                    </span>\n                    <span \n                      className=\"text-sm font-medium text-right ml-2\"\n                      data-testid={`${testId}-card-${String(column.key)}-${item.id}`}\n                    >\n                      {column.render \n                        ? column.render(item[column.key], item)\n                        : String(item[column.key] ?? '')\n                      }\n                    </span>\n                  </div>\n                ))}\n                \n                {getActionsForItem(item).length > 0 && (\n                  <div className=\"flex justify-end space-x-2 pt-2 border-t border-border\">\n                    {getActionsForItem(item).map((action, actionIndex) => (\n                      <Button\n                        key={actionIndex}\n                        variant={action.variant || \"ghost\"}\n                        size=\"sm\"\n                        onClick={() => action.onClick(item)}\n                        disabled={action.disabled}\n                        data-testid={action.testId ? action.testId(item) : `${testId}-card-action-${actionIndex}-${item.id}`}\n                      >\n                        {action.icon}\n                      </Button>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n    </>\n  );\n}","size_bytes":6081},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/pages/parties.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from \"@/components/ui/alert-dialog\";\nimport { Plus, Upload } from \"lucide-react\";\nimport PartyForm from \"@/components/forms/party-form\";\nimport PartiesTable from \"@/components/tables/parties-table\";\nimport BulkUpload from \"@/components/forms/bulk-upload\";\nimport { api } from \"@/lib/api\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function Parties() {\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [isEditDialogOpen, setIsEditDialogOpen] = useState(false);\n  const [isDeleteDialogOpen, setIsDeleteDialogOpen] = useState(false);\n  const [isBulkUploadOpen, setIsBulkUploadOpen] = useState(false);\n  const [selectedParty, setSelectedParty] = useState<any>(null);\n  const { toast } = useToast();\n\n  const { data: parties, isLoading } = useQuery({\n    queryKey: [\"/api/parties\"],\n    queryFn: api.getParties,\n  });\n\n  const createPartyMutation = useMutation({\n    mutationFn: api.createParty,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/parties\"] });\n      setIsDialogOpen(false);\n      toast({\n        title: \"Success\",\n        description: \"Party created successfully\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to create party\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updatePartyMutation = useMutation({\n    mutationFn: ({ id, data }: { id: number; data: any }) => api.updateParty(id, data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/parties\"] });\n      setIsEditDialogOpen(false);\n      setSelectedParty(null);\n      toast({\n        title: \"Success\",\n        description: \"Party updated successfully\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to update party\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deletePartyMutation = useMutation({\n    mutationFn: api.deleteParty,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/parties\"] });\n      setIsDeleteDialogOpen(false);\n      setSelectedParty(null);\n      toast({\n        title: \"Success\",\n        description: \"Party deleted successfully\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to delete party\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleCreateParty = (data: any) => {\n    createPartyMutation.mutate(data);\n  };\n\n  const handleEditParty = (party: any) => {\n    setSelectedParty(party);\n    setIsEditDialogOpen(true);\n  };\n\n  const handleUpdateParty = (data: any) => {\n    if (selectedParty) {\n      updatePartyMutation.mutate({ id: selectedParty.id, data });\n    }\n  };\n\n  const handleDeleteParty = (party: any) => {\n    setSelectedParty(party);\n    setIsDeleteDialogOpen(true);\n  };\n\n  const confirmDeleteParty = () => {\n    if (selectedParty) {\n      deletePartyMutation.mutate(selectedParty.id);\n    }\n  };\n\n  const handleBulkUploadSuccess = () => {\n    queryClient.invalidateQueries({ queryKey: [\"/api/parties\"] });\n    setIsBulkUploadOpen(false);\n  };\n\n  if (isLoading) {\n    return <div data-testid=\"loading-parties\">Loading parties...</div>;\n  }\n\n  return (\n    <div data-testid=\"parties-page\">\n      <Card>\n        <CardHeader>\n          <div className=\"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between\">\n            <div className=\"min-w-0\">\n              <CardTitle data-testid=\"parties-title\">Party Master</CardTitle>\n              <p className=\"text-muted-foreground text-sm mt-1 hidden sm:block\" data-testid=\"parties-description\">\n                Manage your customers and suppliers directory\n              </p>\n            </div>\n            <div className=\"flex gap-2 flex-shrink-0\">\n              <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\n                <DialogTrigger asChild>\n                  <Button data-testid=\"button-add-party\" className=\"flex-1 sm:flex-none\">\n                    <Plus className=\"w-4 h-4 mr-2\" />\n                    Add Party\n                  </Button>\n                </DialogTrigger>\n                <DialogContent data-testid=\"add-party-dialog\">\n                  <DialogHeader>\n                    <DialogTitle>Add New Party</DialogTitle>\n                  </DialogHeader>\n                  <PartyForm\n                    onSubmit={handleCreateParty}\n                    isLoading={createPartyMutation.isPending}\n                  />\n                </DialogContent>\n              </Dialog>\n\n              <Dialog open={isBulkUploadOpen} onOpenChange={setIsBulkUploadOpen}>\n                <DialogTrigger asChild>\n                  <Button variant=\"outline\" data-testid=\"button-bulk-upload-parties\" className=\"flex-1 sm:flex-none\">\n                    <Upload className=\"w-4 h-4 mr-2\" />\n                    Bulk Upload\n                  </Button>\n                </DialogTrigger>\n                <DialogContent className=\"max-w-4xl\" data-testid=\"bulk-upload-parties-dialog\">\n                  <DialogHeader>\n                    <DialogTitle>Bulk Upload Parties</DialogTitle>\n                  </DialogHeader>\n                  <BulkUpload\n                    endpoint=\"/api/parties/bulk\"\n                    title=\"Bulk Upload Parties\"\n                    description=\"Upload multiple parties at once using an Excel file\"\n                    templateHeaders={['Party Name', 'Address', 'Pin Code', 'Phone Number', 'GST Number']}\n                    onSuccess={handleBulkUploadSuccess}\n                  />\n                </DialogContent>\n              </Dialog>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <PartiesTable \n            parties={parties || []} \n            onEdit={handleEditParty}\n            onDelete={handleDeleteParty}\n          />\n        </CardContent>\n      </Card>\n\n      {/* Edit Party Dialog */}\n      <Dialog open={isEditDialogOpen} onOpenChange={setIsEditDialogOpen}>\n        <DialogContent data-testid=\"edit-party-dialog\">\n          <DialogHeader>\n            <DialogTitle>Edit Party</DialogTitle>\n          </DialogHeader>\n          {selectedParty && (\n            <PartyForm\n              initialData={selectedParty}\n              onSubmit={handleUpdateParty}\n              isLoading={updatePartyMutation.isPending}\n            />\n          )}\n        </DialogContent>\n      </Dialog>\n\n      {/* Delete Confirmation Dialog */}\n      <AlertDialog open={isDeleteDialogOpen} onOpenChange={setIsDeleteDialogOpen}>\n        <AlertDialogContent data-testid=\"delete-party-dialog\">\n          <AlertDialogHeader>\n            <AlertDialogTitle>Delete Party</AlertDialogTitle>\n            <AlertDialogDescription>\n              Are you sure you want to delete \"{selectedParty?.name}\"? This action cannot be undone.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel data-testid=\"button-cancel-delete\">Cancel</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={confirmDeleteParty}\n              className=\"bg-red-600 hover:bg-red-700\"\n              data-testid=\"button-confirm-delete\"\n            >\n              Delete\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  );\n}\n","size_bytes":7903},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","size_bytes":1858},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/auth/login-page.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Building2, Lock, Shield, Users } from \"lucide-react\";\n\nexport function LoginPage() {\n  const handleLogin = () => {\n    window.location.href = '/api/login';\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4\">\n      <div className=\"max-w-md w-full space-y-8\">\n        {/* Header */}\n        <div className=\"text-center\">\n          <div className=\"flex items-center justify-center mb-4\">\n            <Building2 className=\"h-10 w-10 text-blue-600 dark:text-blue-400\" />\n          </div>\n          <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white mb-2\">\n            Fitwell ERP\n          </h1>\n          <p className=\"text-gray-600 dark:text-gray-300\">\n            Manufacturing management made simple\n          </p>\n        </div>\n\n        {/* Login Card */}\n        <Card className=\"w-full\">\n          <CardHeader className=\"text-center\">\n            <CardTitle className=\"text-2xl\">Welcome Back</CardTitle>\n            <CardDescription>\n              Sign in to access your manufacturing dashboard\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-6\">\n            {/* Features List */}\n            <div className=\"space-y-3 text-sm text-gray-600 dark:text-gray-300\">\n              <div className=\"flex items-center gap-3\">\n                <Shield className=\"h-4 w-4 text-green-600\" />\n                <span>Secure authentication</span>\n              </div>\n              <div className=\"flex items-center gap-3\">\n                <Users className=\"h-4 w-4 text-blue-600\" />\n                <span>Multiple login options</span>\n              </div>\n              <div className=\"flex items-center gap-3\">\n                <Lock className=\"h-4 w-4 text-purple-600\" />\n                <span>Protected data access</span>\n              </div>\n            </div>\n\n            {/* Login Button */}\n            <Button \n              onClick={handleLogin}\n              className=\"w-full\" \n              size=\"lg\"\n              data-testid=\"button-login\"\n            >\n              Sign In with Replit\n            </Button>\n\n            <p className=\"text-xs text-center text-gray-500 dark:text-gray-400\">\n              By signing in, you'll have access to all ERP features including \n              product management, production tracking, sales orders, and reporting.\n            </p>\n          </CardContent>\n        </Card>\n\n        {/* Footer */}\n        <div className=\"text-center text-sm text-gray-500 dark:text-gray-400\">\n          <p>Powered by Replit Auth</p>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":2839},"client/src/components/layout/main-layout.tsx":{"content":"import { Bell, Settings, LogOut, User, Menu } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { useState } from \"react\";\nimport AppSidebar from \"./app-sidebar\";\n\ninterface MainLayoutProps {\n  children: React.ReactNode;\n}\n\nexport default function MainLayout({ children }: MainLayoutProps) {\n  const { user, logout, isLoggingOut } = useAuth();\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n\n  return (\n    <div className=\"min-h-screen flex bg-background\">\n      <AppSidebar \n        isOpen={sidebarOpen} \n        onClose={() => setSidebarOpen(false)} \n      />\n      \n      <main className=\"flex-1 flex flex-col\">\n        <header className=\"bg-card border-b border-border px-4 sm:px-6 py-4\" data-testid=\"header\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center space-x-4\">\n                {/* Mobile Menu Button */}\n                <Button\n                  variant=\"ghost\"\n                  size=\"icon\"\n                  onClick={() => setSidebarOpen(true)}\n                  className=\"lg:hidden\"\n                  data-testid=\"button-menu\"\n                >\n                  <Menu className=\"w-5 h-5\" />\n                </Button>\n                \n                <div className=\"min-w-0\">\n                  <h2 className=\"text-lg sm:text-2xl font-bold truncate\" data-testid=\"page-title\">\n                    Manufacturing Dashboard\n                  </h2>\n                  <p className=\"text-muted-foreground text-sm hidden sm:block\" data-testid=\"page-description\">\n                    Real-time overview of your production operations\n                  </p>\n                </div>\n              </div>\n              \n              <div className=\"flex items-center space-x-2 sm:space-x-4\">\n                <Button variant=\"ghost\" size=\"icon\" className=\"hidden sm:flex\" data-testid=\"button-notifications\">\n                  <Bell className=\"w-5 h-5 text-muted-foreground\" />\n                </Button>\n                <Button variant=\"ghost\" size=\"icon\" className=\"hidden sm:flex\" data-testid=\"button-settings\">\n                  <Settings className=\"w-5 h-5 text-muted-foreground\" />\n                </Button>\n                \n                {/* User Info */}\n                {user && (\n                  <div className=\"flex items-center space-x-2 sm:space-x-3\">\n                    <div className=\"hidden sm:flex items-center space-x-2 px-2\">\n                      <User className=\"w-4 h-4 text-muted-foreground\" />\n                      <span className=\"text-sm font-medium truncate max-w-32\" data-testid=\"user-name-display\">\n                        {user.firstName && user.lastName \n                          ? `${user.firstName} ${user.lastName}`\n                          : user.email\n                        }\n                      </span>\n                    </div>\n                    <Button \n                      variant=\"ghost\" \n                      size=\"icon\" \n                      onClick={() => logout()}\n                      disabled={isLoggingOut}\n                      data-testid=\"button-logout\"\n                      title=\"Sign out\"\n                    >\n                      <LogOut className=\"w-5 h-5 text-muted-foreground\" />\n                    </Button>\n                  </div>\n                )}\n              </div>\n            </div>\n          </header>\n\n        <div className=\"flex-1 p-4 sm:p-6 overflow-auto\" data-testid=\"main-content\">\n          {children}\n        </div>\n      </main>\n    </div>\n  );\n}\n","size_bytes":3595},"client/src/components/tables/inventory-table.tsx":{"content":"import { Badge } from \"@/components/ui/badge\";\nimport { TrendingUp, TrendingDown, Minus } from \"lucide-react\";\nimport ResponsiveDataTable from \"@/components/ui/responsive-data-table\";\nimport type { InventoryItem } from \"@shared/schema\";\n\ninterface InventoryTableProps {\n  inventory: InventoryItem[];\n}\n\nexport default function InventoryTable({ inventory }: InventoryTableProps) {\n  const getStockStatus = (currentStock: number) => {\n    if (currentStock < 20) return { status: \"critical\", color: \"bg-red-100 text-red-800\", icon: TrendingDown };\n    if (currentStock < 50) return { status: \"low\", color: \"bg-amber-100 text-amber-800\", icon: Minus };\n    return { status: \"good\", color: \"bg-green-100 text-green-800\", icon: TrendingUp };\n  };\n\n  const columns = [\n    {\n      key: 'name' as keyof InventoryItem,\n      label: 'Product',\n      className: 'font-medium',\n    },\n    {\n      key: 'currentStock' as keyof InventoryItem,\n      label: 'Current Stock',\n      className: 'font-bold',\n      render: (value: number) => `${value.toLocaleString()} pieces`,\n    },\n    {\n      key: 'totalProduced' as keyof InventoryItem,\n      label: 'Total Produced',\n      render: (value: number) => `${value.toLocaleString()} pieces`,\n    },\n    {\n      key: 'totalSold' as keyof InventoryItem,\n      label: 'Total Sold',\n      render: (value: number) => `${value.toLocaleString()} pieces`,\n    },\n    {\n      key: 'adjustments' as keyof InventoryItem,\n      label: 'Adjustments',\n      render: (value: number) => {\n        const color = value > 0 ? 'text-green-600' : value < 0 ? 'text-red-600' : 'text-muted-foreground';\n        const prefix = value > 0 ? '+' : '';\n        return <span className={color}>{prefix}{value.toLocaleString()}</span>;\n      },\n    },\n    {\n      key: 'currentStock' as keyof InventoryItem,\n      label: 'Status',\n      render: (value: number) => {\n        const stockInfo = getStockStatus(value);\n        const StockIcon = stockInfo.icon;\n        return (\n          <div className=\"flex items-center space-x-1\">\n            <Badge className={stockInfo.color}>\n              <StockIcon className=\"w-3 h-3 mr-1\" />\n              {stockInfo.status}\n            </Badge>\n          </div>\n        );\n      },\n    },\n    {\n      key: 'rawMaterialType' as keyof InventoryItem,\n      label: 'Material',\n      render: (value: string) => <Badge variant=\"outline\">{value}</Badge>,\n    },\n  ];\n\n  return (\n    <ResponsiveDataTable\n      data={inventory}\n      columns={columns}\n      emptyMessage=\"No inventory data available. Add products and production records to see inventory levels.\"\n      testId=\"inventory-table\"\n      getRowTestId={(item) => `inventory-row-${item.id}`}\n    />\n  );\n}","size_bytes":2696},"client/src/components/tables/production-table.tsx":{"content":"import { Badge } from \"@/components/ui/badge\";\nimport { Edit, Trash2 } from \"lucide-react\";\nimport { format } from \"date-fns\";\nimport ResponsiveDataTable from \"@/components/ui/responsive-data-table\";\nimport type { ProductionWithProduct } from \"@shared/schema\";\n\ninterface ProductionTableProps {\n  production: ProductionWithProduct[];\n  onEdit: (record: ProductionWithProduct) => void;\n  onDelete: (record: ProductionWithProduct) => void;\n}\n\nexport default function ProductionTable({ production, onEdit, onDelete }: ProductionTableProps) {\n  const columns = [\n    {\n      key: 'date' as keyof ProductionWithProduct,\n      label: 'Date',\n      render: (value: string) => format(new Date(value), \"MMM dd, yyyy\"),\n    },\n    {\n      key: 'product' as keyof ProductionWithProduct,\n      label: 'Product',\n      className: 'font-medium',\n      render: (value: any) => value.name,\n    },\n    {\n      key: 'quantityKg' as keyof ProductionWithProduct,\n      label: 'Quantity (KG)',\n      render: (value: string) => `${parseFloat(value).toFixed(3)} kg`,\n    },\n    {\n      key: 'pieces' as keyof ProductionWithProduct,\n      label: 'Pieces',\n      className: 'font-bold',\n      render: (value: number) => value.toLocaleString(),\n    },\n    {\n      key: 'product' as keyof ProductionWithProduct,\n      label: 'Cost Per Piece',\n      className: 'font-semibold text-green-700',\n      render: (value: any) => \n        `₹${((parseFloat(value.weightGrams) / 1000) * parseFloat(value.rawMaterialPricePerKg)).toFixed(2)}`,\n    },\n    {\n      key: 'product' as keyof ProductionWithProduct,\n      label: 'Material Type',\n      render: (value: any) => <Badge variant=\"outline\">{value.rawMaterialType}</Badge>,\n    },\n  ];\n\n  const actions = [\n    {\n      label: 'Edit',\n      icon: <Edit className=\"w-4 h-4\" />,\n      onClick: (record: ProductionWithProduct) => onEdit(record),\n      variant: 'ghost' as const,\n      testId: (record: ProductionWithProduct) => `button-edit-production-${record.id}`,\n    },\n    {\n      label: 'Delete',\n      icon: <Trash2 className=\"w-4 h-4\" />,\n      onClick: (record: ProductionWithProduct) => onDelete(record),\n      variant: 'ghost' as const,\n      testId: (record: ProductionWithProduct) => `button-delete-production-${record.id}`,\n    },\n  ];\n\n  return (\n    <ResponsiveDataTable\n      data={production}\n      columns={columns}\n      actions={actions}\n      emptyMessage=\"No production records found. Add your first production record to track manufacturing output.\"\n      testId=\"production-table\"\n      getRowTestId={(record) => `production-row-${record.id}`}\n    />\n  );\n}","size_bytes":2594},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n:root {\n  --background: hsl(0 0% 100%);\n  --foreground: hsl(222.2 84% 4.9%);\n  --card: hsl(0 0% 100%);\n  --card-foreground: hsl(222.2 84% 4.9%);\n  --popover: hsl(0 0% 100%);\n  --popover-foreground: hsl(222.2 84% 4.9%);\n  --primary: hsl(221.2 83.2% 53.3%);\n  --primary-foreground: hsl(210 40% 98%);\n  --secondary: hsl(210 40% 96%);\n  --secondary-foreground: hsl(222.2 84% 4.9%);\n  --muted: hsl(210 40% 96%);\n  --muted-foreground: hsl(215.4 16.3% 46.9%);\n  --accent: hsl(210 40% 96%);\n  --accent-foreground: hsl(222.2 84% 4.9%);\n  --destructive: hsl(0 84.2% 60.2%);\n  --destructive-foreground: hsl(210 40% 98%);\n  --border: hsl(214.3 31.8% 91.4%);\n  --input: hsl(214.3 31.8% 91.4%);\n  --ring: hsl(221.2 83.2% 53.3%);\n  --chart-1: hsl(221.2 83.2% 53.3%);\n  --chart-2: hsl(159.7826 100% 36.0784%);\n  --chart-3: hsl(42.0290 92.8251% 56.2745%);\n  --chart-4: hsl(147.1429 78.5047% 41.9608%);\n  --chart-5: hsl(341.4894 75.2000% 50.9804%);\n  --sidebar: hsl(0 0% 100%);\n  --sidebar-foreground: hsl(222.2 84% 4.9%);\n  --sidebar-primary: hsl(221.2 83.2% 53.3%);\n  --sidebar-primary-foreground: hsl(210 40% 98%);\n  --sidebar-accent: hsl(210 40% 96%);\n  --sidebar-accent-foreground: hsl(222.2 84% 4.9%);\n  --sidebar-border: hsl(214.3 31.8% 91.4%);\n  --sidebar-ring: hsl(221.2 83.2% 53.3%);\n  --font-sans: Inter, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: Menlo, monospace;\n  --radius: 0.5rem;\n  --shadow-2xs: 0px 2px 0px 0px hsl(221.2 83.2% 53.3% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(221.2 83.2% 53.3% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(221.2 83.2% 53.3% / 0.00), 0px 1px 2px -1px hsl(221.2 83.2% 53.3% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(221.2 83.2% 53.3% / 0.00), 0px 1px 2px -1px hsl(221.2 83.2% 53.3% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(221.2 83.2% 53.3% / 0.00), 0px 2px 4px -1px hsl(221.2 83.2% 53.3% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(221.2 83.2% 53.3% / 0.00), 0px 4px 6px -1px hsl(221.2 83.2% 53.3% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(221.2 83.2% 53.3% / 0.00), 0px 8px 10px -1px hsl(221.2 83.2% 53.3% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(221.2 83.2% 53.3% / 0.00);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n}\n\n.dark {\n  --background: hsl(222.2 84% 4.9%);\n  --foreground: hsl(210 40% 98%);\n  --card: hsl(222.2 84% 4.9%);\n  --card-foreground: hsl(210 40% 98%);\n  --popover: hsl(222.2 84% 4.9%);\n  --popover-foreground: hsl(210 40% 98%);\n  --primary: hsl(217.2 91.2% 59.8%);\n  --primary-foreground: hsl(222.2 84% 4.9%);\n  --secondary: hsl(217.2 32.6% 17.5%);\n  --secondary-foreground: hsl(210 40% 98%);\n  --muted: hsl(217.2 32.6% 17.5%);\n  --muted-foreground: hsl(215 20.2% 65.1%);\n  --accent: hsl(217.2 32.6% 17.5%);\n  --accent-foreground: hsl(210 40% 98%);\n  --destructive: hsl(0 62.8% 30.6%);\n  --destructive-foreground: hsl(210 40% 98%);\n  --border: hsl(217.2 32.6% 17.5%);\n  --input: hsl(217.2 32.6% 17.5%);\n  --ring: hsl(224.3 76.3% 94.1%);\n  --chart-1: hsl(217.2 91.2% 59.8%);\n  --chart-2: hsl(159.7826 100% 36.0784%);\n  --chart-3: hsl(42.0290 92.8251% 56.2745%);\n  --chart-4: hsl(147.1429 78.5047% 41.9608%);\n  --chart-5: hsl(341.4894 75.2000% 50.9804%);\n  --sidebar: hsl(222.2 84% 4.9%);\n  --sidebar-foreground: hsl(210 40% 98%);\n  --sidebar-primary: hsl(217.2 91.2% 59.8%);\n  --sidebar-primary-foreground: hsl(222.2 84% 4.9%);\n  --sidebar-accent: hsl(217.2 32.6% 17.5%);\n  --sidebar-accent-foreground: hsl(210 40% 98%);\n  --sidebar-border: hsl(217.2 32.6% 17.5%);\n  --sidebar-ring: hsl(224.3 76.3% 94.1%);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n.sidebar-transition {\n  transition: all 0.3s ease-in-out;\n}\n\n.data-table tr:hover {\n  background-color: var(--muted);\n}\n\n/* Touch-friendly buttons for mobile */\n@media (max-width: 768px) {\n  .data-table button {\n    min-height: 44px; /* iOS recommended touch target size */\n    min-width: 44px;\n  }\n}\n\n/* Improve scroll indicators on mobile */\n.overflow-x-auto {\n  scrollbar-width: thin;\n  scrollbar-color: var(--border) transparent;\n}\n\n.overflow-x-auto::-webkit-scrollbar {\n  height: 8px;\n}\n\n.overflow-x-auto::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.overflow-x-auto::-webkit-scrollbar-thumb {\n  background-color: var(--border);\n  border-radius: 4px;\n}\n\n.overflow-x-auto::-webkit-scrollbar-thumb:hover {\n  background-color: var(--muted-foreground);\n}\n","size_bytes":4447}},"version":2}